(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{102:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(1),o=n.n(r),c=n(20),u=n(21),i=n(90),a=n(89);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  query currentUser { \n    currentUser { \n      id\n      username\n      avatar\n    }\n  }\n"]);return m=function(){return t},t}var d=n.n(a)()(m()),v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(m,t);var e,n,r,a,f=(e=m,function(){var t,n=b(e);if(y()){var r=b(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function m(){return l(this,m),f.apply(this,arguments)}return n=m,(r=[{key:"render",value:function(){var t=this.props.children;return o.a.createElement(c.d,{query:d},(function(e){var n=e.loading,r=e.error,c=e.data;if(n)return o.a.createElement(u.a,null);if(r)return o.a.createElement(i.a,null,o.a.createElement("p",null,r.message));var a=c.currentUser;return o.a.Children.map(t,(function(t){return o.a.cloneElement(t,{currentUser:a})}))}))}}])&&s(n.prototype,r),a&&s(n,a),m}(r.Component)},104:function(t,e,n){"use strict";n.d(e,"a",(function(){return pe}));var r=n(1),o=n.n(r),c=n(20),u=(n(21),n(90),n(89)),i=n.n(u);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n    query usersSearch($page: Int, $limit: Int, $text: String!) { \n        usersSearch(page: $page, limit: $limit, text: $text) { \n            users {\n                id\n                avatar\n                username\n            }\n        }\n    }\n"]);return h=function(){return t},t}var m=i()(h()),d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(h,t);var e,n,r,u,i=(e=h,function(){var t,n=y(e);if(p()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function h(){return f(this,h),i.apply(this,arguments)}return n=h,(r=[{key:"getVariables",value:function(){var t=this.props.variables,e={page:0,limit:5,text:""};return"undefined"!==a(t)&&("undefined"!==a(t.page)&&(e.page=t.page),"undefined"!==a(t.limit)&&(e.limit=t.limit),"undefined"!==a(t.text)&&(e.text=t.text)),e}},{key:"render",value:function(){var t=this.props.children,e=this.getVariables(),n=e.text.length<3;return o.a.createElement(c.d,{query:m,variables:e,skip:n},(function(n){var r=n.loading,c=n.error,u=n.data,i=n.fetchMore,f=n.refetch;if(r||c||"undefined"===a(u))return null;var l=u.usersSearch.users;return o.a.Children.map(t,(function(t){return o.a.cloneElement(t,{users:l,fetchMore:i,variables:e,refetch:f})}))}))}}])&&l(n.prototype,r),u&&l(n,u),h}(r.Component);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?j(t):e}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=S(e);if(P()){var r=S(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return w(this,t)});function i(){var t;g(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return E(j(t=u.call.apply(u,[this].concat(n))),"closeList",(function(){t.setState({showList:!1})})),E(j(t),"state",{showList:t.checkLength(t.props.users)}),t}return n=i,(r=[{key:"componentWillReceiveProps",value:function(t){this.showList(t.users)}},{key:"checkLength",value:function(t){return t.length>0&&(document.addEventListener("click",this.closeList),!0)}},{key:"showList",value:function(t){this.checkLength(t)?this.setState({showList:!0}):this.closeList()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.closeList)}},{key:"render",value:function(){var t=this.props.users;return this.state.showList&&o.a.createElement("div",{className:"result"},t.map((function(t,e){return o.a.createElement("div",{key:t.id,className:"user"},o.a.createElement("img",{src:t.avatar}),o.a.createElement("span",null,t.username))})))}}])&&O(n.prototype,r),c&&O(n,c),i}(r.Component);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?T(t):e}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=I(e);if(A()){var r=I(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return D(this,t)});function i(){var t;k(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return $(T(t=u.call.apply(u,[this].concat(n))),"state",{text:""}),$(T(t),"changeText",(function(e){t.setState({text:e.target.value})})),t}return n=i,(r=[{key:"render",value:function(){var t=this.state.text;return o.a.createElement("div",{className:"search"},o.a.createElement("input",{type:"text",onChange:this.changeText,value:t}),o.a.createElement(d,{variables:{text:t}},o.a.createElement(R,null)))}}])&&x(n.prototype,r),c&&x(n,c),i}(r.Component);function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e){return!e||"object"!==q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function K(){var t=B(["\n  mutation uploadAvatar($file: Upload!) {\n    uploadAvatar(file : $file) {\n      filename\n      url\n    }\n  }\n"]);return K=function(){return t},t}function J(){var t=B(["\n  query currentUser { \n    currentUser { \n      id\n      username\n      avatar\n    }\n  }\n"]);return J=function(){return t},t}function B(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var X=i()(J()),G=i()(K()),Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(a,t);var e,n,r,u,i=(e=a,function(){var t,n=V(e);if(W()){var r=V(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Q(this,t)});function a(){return F(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var t=this.props.children;return o.a.createElement(c.c,{update:function(t,e){var n=e.data.uploadAvatar,r={query:X},o=t.readQuery(r);o.currentUser.avatar=n.url,t.writeQuery(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r,{data:o}))},mutation:G},(function(e){return o.a.Children.map(t,(function(t){return o.a.cloneElement(t,{uploadAvatar:e})}))}))}}])&&U(n.prototype,r),u&&U(n,u),a}(r.Component),Z=n(110),tt=n.n(Z),et=n(120),nt=n.n(et);function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ut(t,e){return!e||"object"!==rt(e)&&"function"!=typeof e?it(t):e}function it(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function at(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function st(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}tt.a.setAppElement("#root");var pt={content:{width:"400px",height:"450px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};function yt(t){for(var e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return new Blob([r],{type:n})}var bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=ft(e);if(at()){var r=ft(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return ut(this,t)});function i(){var t;ot(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return st(it(t=u.call.apply(u,[this].concat(n))),"state",{result:null,filename:null,filetype:null,src:null,error:null}),st(it(t),"onChange",(function(e){t.setState(e)})),st(it(t),"uploadAvatar",(function(){var e=it(t),n=yt(t.state.result);n.name=t.state.filename,t.props.uploadAvatar({variables:{file:n}}).then((function(){e.props.showModal()}))})),st(it(t),"changeImage",(function(){t.setState({src:null})})),t}return n=i,(r=[{key:"render",value:function(){return o.a.createElement(tt.a,{isOpen:this.props.isOpen,onRequestClose:this.props.showModal,contentLabel:"Change avatar",style:pt},o.a.createElement(nt.a,{onChange:this.onChange,value:this.state}),null!==this.state.src&&o.a.createElement("button",{className:"cancelUpload",onClick:this.changeImage},"Change image"),o.a.createElement("button",{className:"uploadAvatar",onClick:this.uploadAvatar},"Save"))}}])&&ct(n.prototype,r),c&&ct(n,c),i}(r.Component);function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?gt(t):e}function gt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var St=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=wt(e);if(Ot()){var r=wt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return vt(this,t)});function i(){var t;mt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Pt(gt(t=u.call.apply(u,[this].concat(n))),"state",{isOpen:!1}),Pt(gt(t),"showModal",(function(){t.setState({isOpen:!t.state.isOpen})})),t}return n=i,(r=[{key:"render",value:function(){var t=this.props.user;return t?o.a.createElement("div",{className:"user"},o.a.createElement("img",{src:t.avatar,onClick:this.showModal}),o.a.createElement(Y,null,o.a.createElement(bt,{isOpen:this.state.isOpen,showModal:this.showModal})),o.a.createElement("span",null,t.username)):null}}])&&dt(n.prototype,r),c&&dt(n,c),i}(r.Component),_t=n(93);function Et(t){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kt(t,e){return!e||"object"!==Et(e)&&"function"!=typeof e?xt(t):e}function xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function At(t,e){return(At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function It(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=Tt(e);if(Dt()){var r=Tt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return kt(this,t)});function i(){var t;Rt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return It(xt(t=u.call.apply(u,[this].concat(n))),"logout",(function(){t.props.logout().then((function(){localStorage.removeItem("jwt"),t.props.client.resetStore()}))})),t}return n=i,(r=[{key:"render",value:function(){return o.a.createElement("button",{className:"logout",onClick:this.logout},"Logout")}}])&&Ct(n.prototype,r),c&&Ct(n,c),i}(r.Component),$t=Object(c.f)(Mt),Nt=n(42);function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ft(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?Ut(t):e}function Ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vt(t,e){return(Vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ht(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=Wt(e);if(Qt()){var r=Wt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Ft(this,t)});function i(){var t;zt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ht(Ut(t=u.call.apply(u,[this].concat(n))),"goHome",(function(){t.props.history.push("/app")})),t}return n=i,(r=[{key:"render",value:function(){return o.a.createElement("button",{className:"goHome",onClick:this.goHome},"Home")}}])&&Lt(n.prototype,r),c&&Lt(n,c),i}(r.Component),Jt=Object(Nt.a)(Kt);function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yt(t,e){return!e||"object"!==Bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ee(t,e){return(ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ne(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  mutation logout {\n    logout {\n      success\n    }\n  }\n"]);return ne=function(){return t},t}var re=i()(ne()),oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ee(t,e)}(a,t);var e,n,r,u,i=(e=a,function(){var t,n=te(e);if(Zt()){var r=te(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Yt(this,t)});function a(){return Xt(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var t=this.props.children;return o.a.createElement(c.c,{mutation:re},(function(e,n){var r=n.loading,c=n.error;return o.a.Children.map(t,(function(t){return o.a.cloneElement(t,{logout:e,loading:r,error:c})}))}))}}])&&Gt(n.prototype,r),u&&Gt(n,u),a}(r.Component);function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ae(t,e){return!e||"object"!==ce(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=le(e);if(fe()){var r=le(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return ae(this,t)});function i(){return ue(this,i),u.apply(this,arguments)}return n=i,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"topbar"},o.a.createElement("div",{className:"inner"},o.a.createElement(N,null),o.a.createElement(_t.a,null,o.a.createElement(St,null))),o.a.createElement("div",{className:"buttons"},o.a.createElement(Jt,null),o.a.createElement(oe,null,o.a.createElement($t,{changeLoginState:this.props.changeLoginState}))))}}])&&ie(n.prototype,r),c&&ie(n,c),i}(r.Component)},105:function(t,e,n){"use strict";n.d(e,"a",(function(){return Xt}));var r=n(1),o=n.n(r),c=n(20),u=n(89),i=n.n(u);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(){var t=d(["\n  mutation addMessage($message: MessageInput!) {\n    addMessage(message: $message) {\n      id\n      text\n      user {\n        id\n      }\n    }\n  }\n"]);return h=function(){return t},t}function m(){var t=d(["\n  query chat($chatId: Int!) {\n    chat(chatId: $chatId) {\n      id\n      users {\n        id\n        avatar\n        username\n      }\n      messages {\n        id\n        text\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return m=function(){return t},t}function d(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var v=i()(m()),g=i()(h()),O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(a,t);var e,n,r,u,i=(e=a,function(){var t,n=y(e);if(p()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function a(){return f(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var t=this.props,e=t.children,n=t.chat;return o.a.createElement(c.c,{update:function(t,e){var r=e.data.addMessage,o=t.readQuery({query:v,variables:{chatId:n.id}});o.chat.messages.push(r),t.writeQuery({query:v,variables:{chatId:n.id},data:o})},mutation:g},(function(t){return o.a.Children.map(e,(function(e){return o.a.cloneElement(e,{addMessage:t})}))}))}}])&&l(n.prototype,r),u&&l(n,u),a}(r.Component);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=R(e);if(E()){var r=R(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return S(this,t)});function i(){var t;j(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return k(_(t=u.call.apply(u,[this].concat(n))),"state",{value:""}),k(_(t),"handleKeyPress",(function(e){var n=_(t),r=t.props,o=r.chat,c=r.addMessage;"Enter"===e.key&&t.state.value.length&&c({variables:{message:{text:t.state.value,chatId:o.id}}}).then((function(){n.setState({value:""})}))})),k(_(t),"onChangeChatInput",(function(e){e.preventDefault(),t.setState({value:e.target.value})})),t}return n=i,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"input"},o.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onChangeChatInput,onKeyPress:this.handleKeyPress}))}}])&&P(n.prototype,r),c&&P(n,c),i}(r.Component);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=$(e);if(M()){var r=$(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return I(this,t)});function i(){return T(this,i),u.apply(this,arguments)}return n=i,(r=[{key:"render",value:function(){var t=this.props,e=t.chat,n=t.closeChat;return t.user,o.a.createElement("div",{className:"chatWindow"},o.a.createElement("div",{className:"header"},o.a.createElement("span",null,e.users[1].username),o.a.createElement("button",{className:"close",onClick:function(){return n(e.id)}},"X")),o.a.createElement("div",{className:"messages"},e.messages.map((function(t,e){return o.a.createElement("div",{key:"message"+t.id,className:"message "+(t.user.id>1?"left":"right")},t.text)}))),o.a.createElement(O,{chat:e},o.a.createElement(x,{chat:e})))}}])&&A(n.prototype,r),c&&A(n,c),i}(r.Component),z=n(21),L=n(90);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  query chat($chatId: Int!) {\n    chat(chatId: $chatId) {\n      id\n      users {\n        id\n        avatar\n        username\n      }\n      messages {\n        id\n        text\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return J=function(){return t},t}var B=i()(J()),X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(a,t);var e,n,r,u,i=(e=a,function(){var t,n=H(e);if(V()){var r=H(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return W(this,t)});function a(){return U(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"getVariables",value:function(){var t=this.props.variables,e={};return"undefined"!==F(t.chatId)&&(e.chatId=t.chatId),e}},{key:"render",value:function(){var t=this.props.children,e=this.getVariables();return o.a.createElement(c.d,{query:B,variables:e},(function(e){var n=e.loading,r=e.error,c=e.data,u=e.subscribeToMore;if(n)return o.a.createElement(z.a,null);if(r)return o.a.createElement(L.a,null,o.a.createElement("p",null,r.message));var i=c.chat;return o.a.Children.map(t,(function(t){return o.a.cloneElement(t,{chat:i,subscribeToMore:u})}))}))}}])&&Q(n.prototype,r),u&&Q(n,u),a}(r.Component);function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tt(t,e){return!e||"object"!==G(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function et(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ot(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  query chats {\n    chats {\n      id\n      users {\n        id\n        avatar\n        username\n      }\n      lastMessage {\n        text\n      }\n    }\n  }\n"]);return ot=function(){return t},t}var ct=i()(ot()),ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(a,t);var e,n,r,u,i=(e=a,function(){var t,n=nt(e);if(et()){var r=nt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return tt(this,t)});function a(){return Y(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var t=this.props.children;return o.a.createElement(c.d,{query:ct},(function(e){var n=e.loading,r=e.error,c=e.data,u=e.subscribeToMore;if(n)return o.a.createElement(z.a,null);if(r)return o.a.createElement(L.a,null,o.a.createElement("p",null,r.message));var i=c.chats;return o.a.Children.map(t,(function(t){return o.a.cloneElement(t,{chats:i,subscribeToMore:u})}))}))}}])&&Z(n.prototype,r),u&&Z(n,u),a}(r.Component);function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t){return function(t){if(Array.isArray(t))return ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ft(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(t,e){return!e||"object"!==it(e)&&"function"!=typeof e?yt(t):e}function yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vt(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  subscription onMessageAdded {\n    messageAdded {\n      id\n      text\n      chat {\n        id\n      }\n      user {\n        id\n        __typename\n      }\n      __typename\n    }\n  }\n"]);return vt=function(){return t},t}var gt=i()(vt()),Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=ht(e);if(bt()){var r=ht(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return pt(this,t)});function i(){var t;lt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return dt(yt(t=u.call.apply(u,[this].concat(n))),"subscribeToNewMessages",(function(){var e=yt(t),n=t.props.user;t.props.subscribeToMore({document:gt,updateQuery:function(t,r){var o=r.subscriptionData;if(!o.data||!t.chats.length)return t;for(var c=-1,u=0;u<t.chats.length;u++)if(t.chats[u].id==o.data.messageAdded.chat.id){c=u;break}if(-1===c)return t;var i=Object.assign({},t.chats[u],{lastMessage:{text:o.data.messageAdded.text,__typename:o.data.messageAdded.__typename}}),a={chats:at(t.chats)};a.chats[u]=i;try{var f=e.props.client.store.cache.readQuery({query:v,variables:{chatId:o.data.messageAdded.chat.id}});n.id!==o.data.messageAdded.user.id&&(f.chat.messages.push(o.data.messageAdded),e.props.client.store.cache.writeQuery({query:v,variables:{chatId:o.data.messageAdded.chat.id},data:f}))}catch(t){}return a}})})),dt(yt(t),"usernamesToString",(function(e){for(var n=t.props.user,r="",o=0;o<e.length;o++)e[o].username!==n.username&&(r+=e[o].username),o-1===e.length&&(r+=", ");return r})),dt(yt(t),"getAvatar",(function(e){var n=t.props.user;return e.length>2?"/public/group.png":e[0].id!==n.id?e[0].avatar:e[1].avatar})),t}return n=i,(r=[{key:"componentDidMount",value:function(){this.subscribeToNewMessages()}},{key:"shorten",value:function(t){return t.length?t.length>12?t.substring(0,t.length-9)+"...":t:""}},{key:"render",value:function(){var t=this,e=this.props.chats;return o.a.createElement("div",{className:"chats"},e.map((function(e,n){return o.a.createElement("div",{key:"chat"+e.id,className:"chat",onClick:function(){return t.props.openChat(e.id)}},o.a.createElement("div",{className:"header"},o.a.createElement("img",{src:t.getAvatar(e.users)}),o.a.createElement("div",null,o.a.createElement("h2",null,t.shorten(t.usernamesToString(e.users))),o.a.createElement("span",null,e.lastMessage&&t.shorten(e.lastMessage.text)))))})))}}])&&st(n.prototype,r),c&&st(n,c),i}(r.Component),wt=Object(c.f)(Ot),jt=n(103);function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Et(t,e){return!e||"object"!==Pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Ct(t){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xt(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  subscription onMessageAdded {\n    messageAdded {\n      id\n      text\n      chat {\n        id\n      }\n      user {\n        id\n        __typename\n      }\n      __typename\n    }\n  }\n"]);return xt=function(){return t},t}var Dt=i()(xt()),Tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(a,t);var e,n,r,u,i=(e=a,function(){var t,n=Ct(e);if(Rt()){var r=Ct(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Et(this,t)});function a(){return St(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var t=this.props.children;return o.a.createElement(c.e,{subscription:Dt},(function(e){var n=e.data;return o.a.Children.map(t,(function(t){return o.a.cloneElement(t,{data:n})}))}))}}])&&_t(n.prototype,r),u&&_t(n,u),a}(r.Component);function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $t(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(u,t);var e,n,r,o,c=(e=u,function(){var t,n=qt(e);if(Nt()){var r=qt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return $t(this,t)});function u(){return It(this,u),c.apply(this,arguments)}return n=u,(r=[{key:"componentWillReceiveProps",value:function(t){"undefined"!==At(t.data)&&"undefined"!==At(t.data.messageAdded)&&t.data&&t.data.messageAdded&&Object(jt.b)(t.data.messageAdded.text,{position:jt.b.POSITION.TOP_LEFT})}},{key:"render",value:function(){return null}}])&&Mt(n.prototype,r),o&&Mt(n,o),u}(r.Component);function Ft(t){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wt(t,e){return!e||"object"!==Ft(e)&&"function"!=typeof e?Vt(t):e}function Vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ht(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=Kt(e);if(Ht()){var r=Kt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Wt(this,t)});function i(){var t;Ut(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Bt(Vt(t=u.call.apply(u,[this].concat(n))),"state",{openChats:[]}),Bt(Vt(t),"openChat",(function(e){var n=t.state.openChats.slice();-1===n.indexOf(e)&&(n.length>2&&(n=n.slice(1)),n.push(e)),t.setState({openChats:n})})),Bt(Vt(t),"closeChat",(function(e){var n=t.state.openChats.slice(),r=n.indexOf(e);n.splice(r,1),t.setState({openChats:n})})),t}return n=i,(r=[{key:"render",value:function(){var t=this,e=this.props.user,n=this.state.openChats;return o.a.createElement("div",{className:"wrapper"},o.a.createElement(jt.a,null),o.a.createElement(Tt,null,o.a.createElement(Lt,null)),o.a.createElement(ut,null,o.a.createElement(wt,{openChat:this.openChat,user:e})),o.a.createElement("div",{className:"openChats"},n.map((function(n,r){return o.a.createElement(X,{key:"chatWindow"+n,variables:{chatId:n}},o.a.createElement(q,{closeChat:t.closeChat,user:e}))}))))}}])&&Qt(n.prototype,r),c&&Qt(n,c),i}(r.Component)},106:function(t,e,n){"use strict";n.d(e,"a",(function(){return Et}));var r=n(1),o=n.n(r),c=n(107),u=n.n(c);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=y(e);if(p()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function i(){var t;a(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return h(s(t=u.call.apply(u,[this].concat(n))),"state",{show:!1}),h(s(t),"handleClick",(function(){var e=t.state.show;t.setState({show:!e},(function(){e?document.removeEventListener("click",t.handleClick):document.addEventListener("click",t.handleClick)}))})),t}return n=i,(r=[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!0)}},{key:"render",value:function(){var t=this.props,e=t.trigger,n=t.children,r=this.state.show;return o.a.createElement("div",{className:"dropdown"},o.a.createElement("div",null,o.a.createElement("div",{className:"trigger",onClick:this.handleClick},e),r&&o.a.createElement("div",{className:"content"},n)))}}])&&f(n.prototype,r),c&&f(n,c),i}(r.Component),d=n(109),v=n(20),g=n(89),O=n.n(g);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(){var t=T(["\n    mutation deletePost($postId : Int!) {\n        deletePost(postId : $postId) {\n            success\n        }\n    }\n"]);return x=function(){return t},t}function D(){var t=T(["\n    query postsFeed($page: Int, $limit: Int) { \n        postsFeed(page: $page, limit: $limit) { \n            posts {\n                id\n                text\n                user {\n                    avatar\n                    username\n                }\n            }\n        }\n    }\n"]);return D=function(){return t},t}function T(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var A=O()(D()),I=O()(x()),M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=C(e);if(R()){var r=C(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return E(this,t)});function i(){return S(this,i),u.apply(this,arguments)}return n=i,(r=[{key:"render",value:function(){var t=this.props.children,e=this.props.post.id,n={page:0,limit:10};return o.a.createElement(v.c,{update:function(t,r){if(r.data.deletePost.success){var o={query:A};"undefined"!==P(n)&&(o.variables=n);for(var c=t.readQuery(o),u=0;u<c.postsFeed.posts.length&&c.postsFeed.posts[u].id!==e;u++);c.postsFeed.posts.splice(u,1),t.writeQuery(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},o,{data:c}))}},mutation:I},(function(n){return o.a.Children.map(t,(function(t){return o.a.cloneElement(t,{deletePost:n,postId:e})}))}))}}])&&_(n.prototype,r),c&&_(n,c),i}(r.Component),$=n(16),N=function(t){var e=t.deletePost,n=t.postId;return o.a.createElement("button",{onClick:function(){e({variables:{postId:n}})}},"Delete")},q=function(t){var e=t.post,n=t.changeState;return o.a.createElement("div",{className:"header"},o.a.createElement($.a,{to:"/user/"+e.user.username},o.a.createElement("img",{src:e.user.avatar}),o.a.createElement("div",null,o.a.createElement("h2",null,e.user.username))),o.a.createElement(m,{trigger:o.a.createElement(d.a,{icon:"angle-down"})},o.a.createElement("button",{onClick:n},"Edit"),o.a.createElement(M,{post:e},o.a.createElement(N,null))))},z=function(t){var e=t.post;return o.a.createElement("p",{className:"content"},e.text)},L=n(95);function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function V(t,e){return!e||"object"!==U(e)&&"function"!=typeof e?H(t):e}function H(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G(){var t=Z(["\nmutation updatePost($post : PostInput!, $postId : Int!) {\n    updatePost(post : $post, postId : $postId) {\n        id\n        text\n    }\n}"]);return G=function(){return t},t}function Y(){var t=Z(["\n  query postsFeed($page: Int, $limit: Int) { \n    postsFeed(page: $page, limit: $limit) { \n      posts {\n        id\n        text\n        user {\n          avatar\n          username\n        }\n      }\n    }\n  }\n"]);return Y=function(){return t},t}function Z(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var tt=O()(Y()),et=O()(G()),nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=J(e);if(K()){var r=J(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return V(this,t)});function i(){var t;Q(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return X(H(t=u.call.apply(u,[this].concat(n))),"state",{postContent:t.props.post.text}),X(H(t),"changePostContent",(function(e){t.setState({postContent:e})})),t}return n=i,(r=[{key:"render",value:function(){var t=this,e=this.props.children,n=this.state.postContent,r=this.props.post.id,c={page:0,limit:10};return o.a.createElement(v.c,{update:function(t,e){var n=e.data.updatePost,o={query:tt};"undefined"!==U(c)&&(o.variables=c);for(var u=t.readQuery(o),i=0;i<u.postsFeed.posts.length;i++)if(u.postsFeed.posts[i].id===r){u.postsFeed.posts[i].text=n.text;break}t.writeQuery(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){X(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},o,{data:u}))},optimisticResponse:{__typename:"Mutation",updatePost:{__typename:"Post",text:n}},mutation:et},(function(c){return o.a.Children.map(e,(function(e){return o.a.cloneElement(e,{updatePost:c,postContent:n,postId:r,changePostContent:t.changePostContent})}))}))}}])&&W(n.prototype,r),c&&W(n,c),i}(r.Component),rt=n(0),ot=n.n(rt);function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e){return!e||"object"!==ct(e)&&"function"!=typeof e?ft(t):e}function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(i,t);var e,n,r,c,u=(e=i,function(){var t,n=st(e);if(lt()){var r=st(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return at(this,t)});function i(){var t;ut(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return yt(ft(t=u.call.apply(u,[this].concat(n))),"state",{editing:!1}),yt(ft(t),"changeState",(function(){var e=t.state.editing;t.setState({editing:!e})})),t}return n=i,(r=[{key:"render",value:function(){var t=this.props.post,e=this.state.editing;return o.a.createElement("div",{className:"post "+(t.id<0?"optimistic":"")},o.a.createElement(q,{post:t,changeState:this.changeState}),!e&&o.a.createElement(z,{post:t}),e&&o.a.createElement(nt,{post:t},o.a.createElement(L.a,{changeState:this.changeState})))}}])&&it(n.prototype,r),c&&it(n,c),i}(r.Component);function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t){return function(t){if(Array.isArray(t))return dt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ot(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?wt(t):e}function wt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}yt(bt,"propTypes",{post:ot.a.shape({id:ot.a.number.isRequired,text:ot.a.string.isRequired,user:ot.a.shape({avatar:ot.a.string.isRequired,username:ot.a.string.isRequired}).isRequired}).isRequired});var Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(a,t);var e,n,r,c,i=(e=a,function(){var t,n=Pt(e);if(jt()){var r=Pt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Ot(this,t)});function a(){var t;vt(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return _t(wt(t=i.call.apply(i,[this].concat(n))),"state",{page:0,hasMore:!0}),_t(wt(t),"loadMore",(function(e){var n=wt(t),r=t.state.page;e({variables:{page:r+1},updateQuery:function(t,e){var o=e.fetchMoreResult;return o.postsFeed.posts.length?(n.setState({page:r+1}),{postsFeed:{__typename:"PostFeed",posts:[].concat(mt(t.postsFeed.posts),mt(o.postsFeed.posts))}}):(n.setState({hasMore:!1}),t)}})})),t}return n=a,(r=[{key:"render",value:function(){var t=this,e=this.props,n=e.posts,r=e.fetchMore,c=this.state.hasMore;return o.a.createElement("div",{className:"feed"},o.a.createElement(u.a,{loadMore:function(){return t.loadMore(r)},hasMore:c,loader:o.a.createElement("div",{className:"loader",key:"loader"},"Loading ...")},n.map((function(t,e){return o.a.createElement(bt,{key:t.id,post:t})}))))}}])&&gt(n.prototype,r),c&&gt(n,c),a}(r.Component)},90:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(1),o=n.n(r);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(y,t);var e,n,r,c,p=(e=y,function(){var t,n=l(e);if(f()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return a(this,t)});function y(){return u(this,y),p.apply(this,arguments)}return n=y,(r=[{key:"render",value:function(){var t=this.props.children;return o.a.createElement("div",{className:"error message"},t)}}])&&i(n.prototype,r),c&&i(n,c),y}(r.Component)},93:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(1),o=n.n(r),c=n(20),u=n(89);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  query currentUser {\n    currentUser {\n      id\n      username\n      avatar\n    }\n  }\n"]);return b=function(){return t},t}var h=n.n(u)()(b()),m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(b,t);var e,n,r,u,i=(e=b,function(){var t,n=p(e);if(s()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function b(){return a(this,b),i.apply(this,arguments)}return n=b,(r=[{key:"render",value:function(){var t=this.props.children;return o.a.createElement(c.a,null,(function(e){var n=e.readQuery({query:h}).currentUser;return o.a.Children.map(t,(function(t){return o.a.cloneElement(t,{user:n})}))}))}}])&&f(n.prototype,r),u&&f(n,u),b}(r.Component)},94:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(1),o=n.n(r),c=n(20),u=n(21),i=n(90),a=n(89);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  query postsFeed($page: Int, $limit: Int, $username: String) { \n    postsFeed(page: $page, limit: $limit, username: $username) { \n      posts {\n        id\n        text\n        user {\n          avatar\n          username\n        }\n      }\n    }\n  }\n"]);return m=function(){return t},t}var d=n.n(a)()(m()),v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(v,t);var e,n,r,a,m=(e=v,function(){var t,n=b(e);if(y()){var r=b(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function v(){return l(this,v),m.apply(this,arguments)}return n=v,(r=[{key:"getVariables",value:function(){var t=this.props.variables,e={page:0,limit:10};return"undefined"!==f(t)&&("undefined"!==f(t.page)&&(e.page=t.page),"undefined"!==f(t.limit)&&(e.limit=t.limit)),"undefined"!==f(t.username)&&(e.username=t.username),e}},{key:"render",value:function(){var t=this.props.children,e=this.getVariables();return o.a.createElement(c.d,{query:d,variables:e},(function(e){var n=e.loading,r=e.error,c=e.data,a=e.fetchMore;if(n)return o.a.createElement(u.a,null);if(r)return o.a.createElement(i.a,null,o.a.createElement("p",null,r.message));var f=c.postsFeed.posts;return o.a.Children.map(t,(function(t){return o.a.cloneElement(t,{posts:f,fetchMore:a})}))}))}}])&&s(n.prototype,r),a&&s(n,a),v}(r.Component)},95:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(1),o=n.n(r);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(m,t);var e,n,r,b,h=(e=m,function(){var t,n=s(e);if(l()){var r=s(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return a(this,t)});function m(){var t;u(this,m);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return y(f(t=h.call.apply(h,[this].concat(n))),"handlePostContentChange",(function(e){t.props.changePostContent(e.target.value)})),t}return n=m,(r=[{key:"render",value:function(){var t=this,e=this.props,n=e.addPost,r=e.updatePost,u=e.postContent,i=e.postId;return o.a.createElement("div",{className:"postForm"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"undefined"!==c(r)?r({variables:{post:{text:u},postId:i}}).then((function(){t.props.changeState()})):n({variables:{post:{text:u}}}).then((function(){t.props.changePostContent("")}))}},o.a.createElement("textarea",{value:u,onChange:t.handlePostContentChange,placeholder:"Write your custom post!"}),o.a.createElement("input",{type:"submit",value:"Submit"})))}}])&&i(n.prototype,r),b&&i(n,b),m}(r.Component)}}]);