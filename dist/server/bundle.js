!function(e){var n={},s={1:0};function t(s){if(n[s])return n[s].exports;var i=n[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.e=function(n){if(0!==s[n]){var t=require("./"+n+".bundle.js"),i=t.modules,r=t.ids;for(var o in i)e[o]=i[o];for(var l=0;l<r.length;l++)s[r[l]]=0}return Promise.all([])},t.m=e,t.c=n,t.d=function(e,n,s){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(s,i,function(n){return e[n]}.bind(null,i));return s},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/server",t.oe=function(e){process.nextTick((function(){throw e}))},t(t.s=48)}([function(e,n){e.exports=require("react")},function(e,n){e.exports=require("@babel/runtime/regenerator")},function(e,n){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,n){e.exports=require("@babel/runtime/helpers/typeof")},function(e,n){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,n){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,n){e.exports=require("@babel/runtime/helpers/createClass")},function(e,n){e.exports=require("@babel/runtime/helpers/inherits")},function(e,n){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,n){e.exports=require("jsonwebtoken")},function(e,n){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,n){e.exports=require("dotenv")},function(e,n){e.exports=require("react-loadable")},function(e,n){e.exports=require("react-apollo")},function(e,n){e.exports=require("sequelize")},function(e,n){e.exports=require("apollo-server-express")},function(e,n){e.exports=require("winston")},function(e,n,s){"use strict";var t=s(3),i=s.n(t),r=s(0),o=s.n(r);n.a=function(e){var n=e.color,s=e.size,t={backgroundColor:"#6ca6fd",width:40,height:40};return"undefined"!==i()(n)&&(t.color=n),"undefined"!==i()(s)&&(t.width=s,t.height=s),o.a.createElement("div",{className:"bouncer",style:t})}},function(e,n){e.exports=require("graphql-tools")},function(e,n){e.exports=require("react-helmet")},function(e,n){e.exports=require("express")},function(e,n){e.exports=require("path")},function(e,n){e.exports=require("helmet")},function(e,n){e.exports=require("@babel/runtime/helpers/extends")},function(e,n){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,n){e.exports=require("bcrypt")},function(e,n){e.exports=require("graphql-subscriptions")},function(e,n){e.exports=require("graphql")},function(e,n){e.exports=require("@babel/runtime/helpers/objectWithoutProperties")},function(e,n){e.exports=require("react-dom/server")},function(e,n){e.exports=require("cors")},function(e,n){e.exports=require("compression")},function(e,n){e.exports=require("aws-sdk")},function(e,n){e.exports=require("subscriptions-transport-ws")},function(e,n){e.exports={development:{username:"devuser",password:"DevUser2020!",database:"graphbook_dev",host:"localhost",dialect:"mysql",operatorsAliases:!1,pool:{max:5,min:0,acquire:3e4,idle:1e4}},production:{username:"devuser",password:"DevUser2020!",database:"graphbook_dev",host:"localhost",logging:!1,dialect:"mysql",operatorsAliases:!1,pool:{max:5,min:0,acquire:3e4,idle:1e4}}}},function(e,n){e.exports=require("apollo-client")},function(e,n){e.exports=require("apollo-cache-inmemory")},function(e,n){e.exports=require("apollo-link-error")},function(e,n){e.exports=require("apollo-link")},function(e,n){e.exports=require("apollo-link-http")},function(e,n){e.exports=require("node-fetch")},function(e,n){e.exports=require("apollo-link-persisted-queries")},function(e,n){e.exports=require("@fortawesome/fontawesome-svg-core")},function(e,n){e.exports=require("@fortawesome/free-solid-svg-icons")},function(e,n){e.exports=require("cookies")},function(e,n){e.exports=require("http")},function(e,n){e.exports=require("react-loadable/webpack")},function(e,n){e.exports=require("react-router-dom")},function(e,n,s){e.exports=s(55)},function(e,n,s){var t={"./chat.js":50,"./message.js":51,"./post.js":52,"./user.js":53};function i(e){var n=r(e);return s(n)}function r(e){if(!s.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}i.keys=function(){return Object.keys(t)},i.resolve=r,e.exports=i,i.id=49},function(e,n,s){"use strict";e.exports=function(e,n){var s=e.define("Chat",{},{});return s.associate=function(e){s.belongsToMany(e.User,{through:"users_chats"}),s.hasMany(e.Message)},s}},function(e,n,s){"use strict";e.exports=function(e,n){var s=e.define("Message",{text:n.STRING,userId:n.INTEGER,chatId:n.INTEGER},{});return s.associate=function(e){s.belongsTo(e.User),s.belongsTo(e.Chat)},s}},function(e,n,s){"use strict";e.exports=function(e,n){var s=e.define("Post",{text:n.TEXT,userId:n.INTEGER},{});return s.associate=function(e){s.belongsTo(e.User)},s}},function(e,n,s){"use strict";e.exports=function(e,n){var s=e.define("User",{avatar:n.STRING,username:n.STRING,email:n.STRING,password:n.STRING},{});return s.associate=function(e){s.hasMany(e.Post),s.belongsToMany(e.Chat,{through:"users_chats"})},s}},function(e){e.exports=JSON.parse('{"graphql-tag":[{"id":89,"name":"./node_modules/graphql-tag/src/index.js","file":"0.c6288521cd9b9f257069.js","publicPath":"/0.c6288521cd9b9f257069.js"}],"graphql/language/parser":[{"id":127,"name":"./node_modules/graphql/language/parser.mjs","file":"0.c6288521cd9b9f257069.js","publicPath":"/0.c6288521cd9b9f257069.js"}],"../helpers/safeHTMLElement":[{"id":91,"name":"./node_modules/react-modal/lib/helpers/safeHTMLElement.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"./util/bytesToSize":[{"id":92,"name":"./node_modules/@synapsestudios/react-drop-n-crop/lib/util/bytesToSize.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"classnames":[{"id":96,"name":"./node_modules/classnames/index.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"../helpers/tabbable":[{"id":97,"name":"./node_modules/react-modal/lib/helpers/tabbable.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"../helpers/ariaAppHider":[{"id":98,"name":"./node_modules/react-modal/lib/helpers/ariaAppHider.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"../helpers/portalOpenInstances":[{"id":99,"name":"./node_modules/react-modal/lib/helpers/portalOpenInstances.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"./util/fileSizeLessThan":[{"id":100,"name":"./node_modules/@synapsestudios/react-drop-n-crop/lib/util/fileSizeLessThan.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"./util/fileType":[{"id":101,"name":"./node_modules/@synapsestudios/react-drop-n-crop/lib/util/fileType.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"react-toastify":[{"id":103,"name":"./node_modules/react-toastify/esm/react-toastify.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"react-infinite-scroller":[{"id":107,"name":"./node_modules/react-infinite-scroller/index.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"./dist/InfiniteScroll":[{"id":108,"name":"./node_modules/react-infinite-scroller/dist/InfiniteScroll.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"@fortawesome/react-fontawesome":[{"id":109,"name":"./node_modules/@fortawesome/react-fontawesome/index.es.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"react-modal":[{"id":110,"name":"./node_modules/react-modal/lib/index.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"./components/Modal":[{"id":111,"name":"./node_modules/react-modal/lib/components/Modal.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"./ModalPortal":[{"id":112,"name":"./node_modules/react-modal/lib/components/ModalPortal.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"../helpers/focusManager":[{"id":113,"name":"./node_modules/react-modal/lib/helpers/focusManager.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"../helpers/scopeTab":[{"id":114,"name":"./node_modules/react-modal/lib/helpers/scopeTab.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"warning":[{"id":115,"name":"./node_modules/react-modal/node_modules/warning/warning.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"},{"id":6,"name":"./node_modules/warning/browser.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":7,"name":"./node_modules/react-router/node_modules/warning/warning.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":23,"name":"./node_modules/react-router-dom/node_modules/warning/warning.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":6,"name":"./node_modules/warning/browser.js","file":"bundle.js","publicPath":"/bundle.js"},{"id":7,"name":"./node_modules/react-router/node_modules/warning/warning.js","file":"bundle.js","publicPath":"/bundle.js"},{"id":23,"name":"./node_modules/react-router-dom/node_modules/warning/warning.js","file":"bundle.js","publicPath":"/bundle.js"}],"exenv":[{"id":116,"name":"./node_modules/exenv/index.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"../helpers/classList":[{"id":117,"name":"./node_modules/react-modal/lib/helpers/classList.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"../helpers/bodyTrap":[{"id":118,"name":"./node_modules/react-modal/lib/helpers/bodyTrap.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"react-lifecycles-compat":[{"id":119,"name":"./node_modules/react-lifecycles-compat/react-lifecycles-compat.es.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"@synapsestudios/react-drop-n-crop":[{"id":120,"name":"./node_modules/@synapsestudios/react-drop-n-crop/lib/index.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"./DropNCrop":[{"id":121,"name":"./node_modules/@synapsestudios/react-drop-n-crop/lib/DropNCrop.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"react-cropper":[{"id":122,"name":"./node_modules/react-cropper/dist/react-cropper.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"cropperjs":[{"id":123,"name":"./node_modules/cropperjs/dist/cropper.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"react-dropzone":[{"id":124,"name":"./node_modules/react-dropzone/dist/index.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"lodash.includes":[{"id":125,"name":"./node_modules/lodash.includes/index.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"./util/dataUrlToFile":[{"id":126,"name":"./node_modules/@synapsestudios/react-drop-n-crop/lib/util/dataUrlToFile.js","file":"1.786f0d33c7c36d335ec8.js","publicPath":"/1.786f0d33c7c36d335ec8.js"}],"./error":[{"id":90,"name":"./src/client/components/error.js","file":"2.b1bc686f423f4360b7d6.js","publicPath":"/2.b1bc686f423f4360b7d6.js"},{"id":90,"name":"./src/client/components/error.js","file":"4.5412c2b27193fcdd75aa.js","publicPath":"/4.5412c2b27193fcdd75aa.js"}],"./components/context/user":[{"id":93,"name":"./src/client/components/context/user.js","file":"2.b1bc686f423f4360b7d6.js","publicPath":"/2.b1bc686f423f4360b7d6.js"}],"./components/queries/postsFeed":[{"id":94,"name":"./src/client/components/queries/postsFeed.js","file":"2.b1bc686f423f4360b7d6.js","publicPath":"/2.b1bc686f423f4360b7d6.js"}],"./components/post/form":[{"id":95,"name":"./src/client/components/post/form.js","file":"2.b1bc686f423f4360b7d6.js","publicPath":"/2.b1bc686f423f4360b7d6.js"}],"./components/queries/currentUser":[{"id":102,"name":"./src/client/components/queries/currentUser.js","file":"2.b1bc686f423f4360b7d6.js","publicPath":"/2.b1bc686f423f4360b7d6.js"}],"./components/bar":[{"id":104,"name":"./src/client/components/bar/index.js","file":"2.b1bc686f423f4360b7d6.js","publicPath":"/2.b1bc686f423f4360b7d6.js"}],"./Chats":[{"id":105,"name":"./src/client/Chats.js","file":"2.b1bc686f423f4360b7d6.js","publicPath":"/2.b1bc686f423f4360b7d6.js"}],"./components/post/feedlist":[{"id":106,"name":"./src/client/components/post/feedlist.js","file":"2.b1bc686f423f4360b7d6.js","publicPath":"/2.b1bc686f423f4360b7d6.js"}],"prop-types":[{"id":0,"name":"./node_modules/prop-types/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":0,"name":"./node_modules/prop-types/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"undefined":[{"id":"","name":null,"file":"bundle.css","publicPath":"/bundle.css"},{"id":"","name":null,"file":"bundle.css","publicPath":"/bundle.css"},{"id":"","name":null,"file":"bundle.css","publicPath":"/bundle.css"},{"id":"","name":null,"file":"bundle.js","publicPath":"/bundle.js"},{"id":"","name":null,"file":"bundle.js","publicPath":"/bundle.js"},{"id":"","name":null,"file":"bundle.js","publicPath":"/bundle.js"}],"react":[{"id":1,"name":"./node_modules/react/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":1,"name":"./node_modules/react/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"apollo-utilities":[{"id":2,"name":"./node_modules/apollo-utilities/lib/bundle.esm.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":2,"name":"./node_modules/apollo-utilities/lib/bundle.esm.js","file":"bundle.js","publicPath":"/bundle.js"}],"ts-invariant":[{"id":3,"name":"./node_modules/ts-invariant/lib/invariant.esm.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":3,"name":"./node_modules/ts-invariant/lib/invariant.esm.js","file":"bundle.js","publicPath":"/bundle.js"}],"tslib":[{"id":4,"name":"./node_modules/tslib/tslib.es6.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":11,"name":"./node_modules/apollo-utilities/node_modules/tslib/tslib.es6.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":4,"name":"./node_modules/tslib/tslib.es6.js","file":"bundle.js","publicPath":"/bundle.js"},{"id":11,"name":"./node_modules/apollo-utilities/node_modules/tslib/tslib.es6.js","file":"bundle.js","publicPath":"/bundle.js"}],"invariant":[{"id":5,"name":"./node_modules/invariant/browser.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":5,"name":"./node_modules/invariant/browser.js","file":"bundle.js","publicPath":"/bundle.js"}],"history":[{"id":8,"name":"./node_modules/history/es/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":8,"name":"./node_modules/history/es/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"apollo-link":[{"id":9,"name":"./node_modules/apollo-link/lib/bundle.esm.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":9,"name":"./node_modules/apollo-link/lib/bundle.esm.js","file":"bundle.js","publicPath":"/bundle.js"}],"zen-observable-ts":[{"id":10,"name":"./node_modules/zen-observable-ts/lib/bundle.esm.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":10,"name":"./node_modules/zen-observable-ts/lib/bundle.esm.js","file":"bundle.js","publicPath":"/bundle.js"}],"graphql/language/visitor":[{"id":12,"name":"./node_modules/graphql/language/visitor.mjs","file":"bundle.css","publicPath":"/bundle.css"},{"id":12,"name":"./node_modules/graphql/language/visitor.mjs","file":"bundle.js","publicPath":"/bundle.js"}],"./../../webpack/buildin/global.js":[{"id":13,"name":"./node_modules/webpack/buildin/global.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":13,"name":"./node_modules/webpack/buildin/global.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-router/es/matchPath":[{"id":14,"name":"./node_modules/react-router/es/matchPath.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":14,"name":"./node_modules/react-router/es/matchPath.js","file":"bundle.js","publicPath":"/bundle.js"}],"apollo-client":[{"id":15,"name":"./node_modules/apollo-client/bundle.esm.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":15,"name":"./node_modules/apollo-client/bundle.esm.js","file":"bundle.js","publicPath":"/bundle.js"}],"./Link":[{"id":16,"name":"./node_modules/react-router-dom/es/Link.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":16,"name":"./node_modules/react-router-dom/es/Link.js","file":"bundle.js","publicPath":"/bundle.js"}],"graphql/language/printer":[{"id":17,"name":"./node_modules/graphql/language/printer.mjs","file":"bundle.css","publicPath":"/bundle.css"},{"id":17,"name":"./node_modules/graphql/language/printer.mjs","file":"bundle.js","publicPath":"/bundle.js"}],"subscriptions-transport-ws":[{"id":18,"name":"./node_modules/subscriptions-transport-ws/dist/client.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":18,"name":"./node_modules/subscriptions-transport-ws/dist/client.js","file":"bundle.js","publicPath":"/bundle.js"}],"hoist-non-react-statics":[{"id":19,"name":"./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":43,"name":"./node_modules/react-router/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":19,"name":"./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","file":"bundle.js","publicPath":"/bundle.js"},{"id":43,"name":"./node_modules/react-router/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-apollo":[{"id":20,"name":"./node_modules/react-apollo/react-apollo.esm.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":20,"name":"./node_modules/react-apollo/react-apollo.esm.js","file":"bundle.js","publicPath":"/bundle.js"}],"./components/loading":[{"id":21,"name":"./src/client/components/loading.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":21,"name":"./src/client/components/loading.js","file":"bundle.js","publicPath":"/bundle.js"}],"object-assign":[{"id":22,"name":"./node_modules/object-assign/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":22,"name":"./node_modules/object-assign/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-router/es/Route":[{"id":24,"name":"./node_modules/react-router/es/Route.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":24,"name":"./node_modules/react-router/es/Route.js","file":"bundle.js","publicPath":"/bundle.js"}],"path-to-regexp":[{"id":25,"name":"./node_modules/react-router/node_modules/path-to-regexp/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":25,"name":"./node_modules/react-router/node_modules/path-to-regexp/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-loadable":[{"id":26,"name":"./node_modules/react-loadable/lib/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":26,"name":"./node_modules/react-loadable/lib/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"./../../process/browser.js":[{"id":27,"name":"./node_modules/process/browser.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":27,"name":"./node_modules/process/browser.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-dom/server":[{"id":28,"name":"./node_modules/react-dom/server.browser.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":28,"name":"./node_modules/react-dom/server.browser.js","file":"bundle.js","publicPath":"/bundle.js"}],"../utils":[{"id":29,"name":"./node_modules/hash.js/lib/hash/utils.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":29,"name":"./node_modules/hash.js/lib/hash/utils.js","file":"bundle.js","publicPath":"/bundle.js"}],"minimalistic-assert":[{"id":30,"name":"./node_modules/minimalistic-assert/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":30,"name":"./node_modules/minimalistic-assert/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"symbol-observable":[{"id":31,"name":"./node_modules/symbol-observable/es/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":31,"name":"./node_modules/symbol-observable/es/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"lodash.isequal":[{"id":32,"name":"./node_modules/lodash.isequal/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":32,"name":"./node_modules/lodash.isequal/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-dom":[{"id":33,"name":"./node_modules/react-dom/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":33,"name":"./node_modules/react-dom/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"./HelmetConstants.js":[{"id":34,"name":"./node_modules/react-helmet/lib/HelmetConstants.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":34,"name":"./node_modules/react-helmet/lib/HelmetConstants.js","file":"bundle.js","publicPath":"/bundle.js"}],"@fortawesome/fontawesome-svg-core":[{"id":35,"name":"./node_modules/@fortawesome/fontawesome-svg-core/index.es.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":35,"name":"./node_modules/@fortawesome/fontawesome-svg-core/index.es.js","file":"bundle.js","publicPath":"/bundle.js"}],"@wry/equality":[{"id":36,"name":"./node_modules/@wry/equality/lib/equality.esm.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":36,"name":"./node_modules/@wry/equality/lib/equality.esm.js","file":"bundle.js","publicPath":"/bundle.js"}],"../jsutils/inspect":[{"id":37,"name":"./node_modules/graphql/jsutils/inspect.mjs","file":"bundle.css","publicPath":"/bundle.css"},{"id":37,"name":"./node_modules/graphql/jsutils/inspect.mjs","file":"bundle.js","publicPath":"/bundle.js"}],"./nodejsCustomInspectSymbol":[{"id":38,"name":"./node_modules/graphql/jsutils/nodejsCustomInspectSymbol.mjs","file":"bundle.css","publicPath":"/bundle.css"},{"id":38,"name":"./node_modules/graphql/jsutils/nodejsCustomInspectSymbol.mjs","file":"bundle.js","publicPath":"/bundle.js"}],"./blockString":[{"id":39,"name":"./node_modules/graphql/language/blockString.mjs","file":"bundle.css","publicPath":"/bundle.css"},{"id":39,"name":"./node_modules/graphql/language/blockString.mjs","file":"bundle.js","publicPath":"/bundle.js"}],"../language/kinds":[{"id":40,"name":"./node_modules/graphql/language/kinds.mjs","file":"bundle.css","publicPath":"/bundle.css"},{"id":40,"name":"./node_modules/graphql/language/kinds.mjs","file":"bundle.js","publicPath":"/bundle.js"}],"react-helmet":[{"id":41,"name":"./node_modules/react-helmet/lib/Helmet.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":41,"name":"./node_modules/react-helmet/lib/Helmet.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-router/es/withRouter":[{"id":42,"name":"./node_modules/react-router/es/withRouter.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":42,"name":"./node_modules/react-router/es/withRouter.js","file":"bundle.js","publicPath":"/bundle.js"}],"./ponyfill.js":[{"id":44,"name":"./node_modules/symbol-observable/es/ponyfill.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":44,"name":"./node_modules/symbol-observable/es/ponyfill.js","file":"bundle.js","publicPath":"/bundle.js"}],"zen-observable":[{"id":45,"name":"./node_modules/zen-observable/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":45,"name":"./node_modules/zen-observable/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"fast-json-stable-stringify":[{"id":46,"name":"./node_modules/fast-json-stable-stringify/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":46,"name":"./node_modules/fast-json-stable-stringify/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"apollo-upload-client":[{"id":47,"name":"./node_modules/apollo-upload-client/lib/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":47,"name":"./node_modules/apollo-upload-client/lib/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-router-dom":[{"id":48,"name":"./node_modules/react-router-dom/es/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":48,"name":"./node_modules/react-router-dom/es/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"./cjs/react.production.min.js":[{"id":49,"name":"./node_modules/react/cjs/react.production.min.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":49,"name":"./node_modules/react/cjs/react.production.min.js","file":"bundle.js","publicPath":"/bundle.js"}],"./cjs/react-dom.production.min.js":[{"id":50,"name":"./node_modules/react-dom/cjs/react-dom.production.min.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":50,"name":"./node_modules/react-dom/cjs/react-dom.production.min.js","file":"bundle.js","publicPath":"/bundle.js"}],"scheduler":[{"id":51,"name":"./node_modules/scheduler/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":51,"name":"./node_modules/scheduler/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"./cjs/scheduler.production.min.js":[{"id":52,"name":"./node_modules/scheduler/cjs/scheduler.production.min.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":52,"name":"./node_modules/scheduler/cjs/scheduler.production.min.js","file":"bundle.js","publicPath":"/bundle.js"}],"./factoryWithThrowingShims":[{"id":53,"name":"./node_modules/prop-types/factoryWithThrowingShims.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":53,"name":"./node_modules/prop-types/factoryWithThrowingShims.js","file":"bundle.js","publicPath":"/bundle.js"}],"./lib/ReactPropTypesSecret":[{"id":54,"name":"./node_modules/prop-types/lib/ReactPropTypesSecret.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":54,"name":"./node_modules/prop-types/lib/ReactPropTypesSecret.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-side-effect":[{"id":55,"name":"./node_modules/react-side-effect/lib/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":55,"name":"./node_modules/react-side-effect/lib/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"shallowequal":[{"id":56,"name":"./node_modules/shallowequal/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":56,"name":"./node_modules/shallowequal/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-fast-compare":[{"id":57,"name":"./node_modules/react-fast-compare/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":57,"name":"./node_modules/react-fast-compare/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"./HelmetUtils.js":[{"id":58,"name":"./node_modules/react-helmet/lib/HelmetUtils.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":58,"name":"./node_modules/react-helmet/lib/HelmetUtils.js","file":"bundle.js","publicPath":"/bundle.js"}],"../../assets/css/style.css":[{"id":59,"name":"./assets/css/style.css","file":"bundle.css","publicPath":"/bundle.css"},{"id":59,"name":"./assets/css/style.css","file":"bundle.js","publicPath":"/bundle.js"}],"@synapsestudios/react-drop-n-crop/lib/react-drop-n-crop.min.css":[{"id":60,"name":"./node_modules/@synapsestudios/react-drop-n-crop/lib/react-drop-n-crop.min.css","file":"bundle.css","publicPath":"/bundle.css"},{"id":60,"name":"./node_modules/@synapsestudios/react-drop-n-crop/lib/react-drop-n-crop.min.css","file":"bundle.js","publicPath":"/bundle.js"}],"./../../timers-browserify/main.js":[{"id":61,"name":"./node_modules/timers-browserify/main.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":61,"name":"./node_modules/timers-browserify/main.js","file":"bundle.js","publicPath":"/bundle.js"}],"setimmediate":[{"id":62,"name":"./node_modules/setimmediate/setImmediate.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":62,"name":"./node_modules/setimmediate/setImmediate.js","file":"bundle.js","publicPath":"/bundle.js"}],"isarray":[{"id":63,"name":"./node_modules/isarray/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":63,"name":"./node_modules/isarray/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-toastify/dist/ReactToastify.css":[{"id":64,"name":"./node_modules/react-toastify/dist/ReactToastify.css","file":"bundle.css","publicPath":"/bundle.css"},{"id":64,"name":"./node_modules/react-toastify/dist/ReactToastify.css","file":"bundle.js","publicPath":"/bundle.js"}],"./../webpack/buildin/module.js":[{"id":65,"name":"./node_modules/webpack/buildin/module.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":65,"name":"./node_modules/webpack/buildin/module.js","file":"bundle.js","publicPath":"/bundle.js"}],"react-is":[{"id":66,"name":"./node_modules/react-is/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":66,"name":"./node_modules/react-is/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"./cjs/react-is.production.min.js":[{"id":67,"name":"./node_modules/react-is/cjs/react-is.production.min.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":67,"name":"./node_modules/react-is/cjs/react-is.production.min.js","file":"bundle.js","publicPath":"/bundle.js"}],"./../../webpack/buildin/harmony-module.js":[{"id":68,"name":"./node_modules/webpack/buildin/harmony-module.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":68,"name":"./node_modules/webpack/buildin/harmony-module.js","file":"bundle.js","publicPath":"/bundle.js"}],"./lib/Observable.js":[{"id":69,"name":"./node_modules/zen-observable/lib/Observable.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":69,"name":"./node_modules/zen-observable/lib/Observable.js","file":"bundle.js","publicPath":"/bundle.js"}],"./cjs/react-dom-server.browser.production.min.js":[{"id":70,"name":"./node_modules/react-dom/cjs/react-dom-server.browser.production.min.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":70,"name":"./node_modules/react-dom/cjs/react-dom-server.browser.production.min.js","file":"bundle.js","publicPath":"/bundle.js"}],"backo2":[{"id":71,"name":"./node_modules/backo2/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":71,"name":"./node_modules/backo2/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"eventemitter3":[{"id":72,"name":"./node_modules/eventemitter3/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":72,"name":"./node_modules/eventemitter3/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"./utils/is-string":[{"id":73,"name":"./node_modules/subscriptions-transport-ws/dist/utils/is-string.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":73,"name":"./node_modules/subscriptions-transport-ws/dist/utils/is-string.js","file":"bundle.js","publicPath":"/bundle.js"}],"./utils/is-object":[{"id":74,"name":"./node_modules/subscriptions-transport-ws/dist/utils/is-object.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":74,"name":"./node_modules/subscriptions-transport-ws/dist/utils/is-object.js","file":"bundle.js","publicPath":"/bundle.js"}],"graphql/utilities/getOperationAST":[{"id":75,"name":"./node_modules/graphql/utilities/getOperationAST.mjs","file":"bundle.css","publicPath":"/bundle.css"},{"id":75,"name":"./node_modules/graphql/utilities/getOperationAST.mjs","file":"bundle.js","publicPath":"/bundle.js"}],"./protocol":[{"id":76,"name":"./node_modules/subscriptions-transport-ws/dist/protocol.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":76,"name":"./node_modules/subscriptions-transport-ws/dist/protocol.js","file":"bundle.js","publicPath":"/bundle.js"}],"./defaults":[{"id":77,"name":"./node_modules/subscriptions-transport-ws/dist/defaults.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":77,"name":"./node_modules/subscriptions-transport-ws/dist/defaults.js","file":"bundle.js","publicPath":"/bundle.js"}],"./message-types":[{"id":78,"name":"./node_modules/subscriptions-transport-ws/dist/message-types.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":78,"name":"./node_modules/subscriptions-transport-ws/dist/message-types.js","file":"bundle.js","publicPath":"/bundle.js"}],"hash.js/lib/hash/sha/256":[{"id":79,"name":"./node_modules/hash.js/lib/hash/sha/256.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":79,"name":"./node_modules/hash.js/lib/hash/sha/256.js","file":"bundle.js","publicPath":"/bundle.js"}],"inherits":[{"id":80,"name":"./node_modules/inherits/inherits_browser.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":80,"name":"./node_modules/inherits/inherits_browser.js","file":"bundle.js","publicPath":"/bundle.js"}],"../common":[{"id":81,"name":"./node_modules/hash.js/lib/hash/common.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":81,"name":"./node_modules/hash.js/lib/hash/common.js","file":"bundle.js","publicPath":"/bundle.js"}],"./common":[{"id":82,"name":"./node_modules/hash.js/lib/hash/sha/common.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":82,"name":"./node_modules/hash.js/lib/hash/sha/common.js","file":"bundle.js","publicPath":"/bundle.js"}],"apollo-link-http-common":[{"id":83,"name":"./node_modules/apollo-link-http-common/lib/bundle.esm.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":83,"name":"./node_modules/apollo-link-http-common/lib/bundle.esm.js","file":"bundle.js","publicPath":"/bundle.js"}],"./src/client/index.js":[{"id":84,"name":"./src/client/index.js","file":"bundle.css","publicPath":"/bundle.css"},{"id":84,"name":"./src/client/index.js","file":"bundle.js","publicPath":"/bundle.js"}],"extract-files":[{"id":85,"name":"./node_modules/extract-files/lib/index.mjs","file":"bundle.css","publicPath":"/bundle.css"},{"id":85,"name":"./node_modules/extract-files/lib/index.mjs","file":"bundle.js","publicPath":"/bundle.js"}],"./components/loginregister":[{"id":88,"name":"./src/client/components/loginregister.js","file":"4.5412c2b27193fcdd75aa.js","publicPath":"/4.5412c2b27193fcdd75aa.js"}],"./Main":[{"id":87,"name":"./src/client/Main.js","file":"5.c8c8a0cfcb03a5ec2465.js","publicPath":"/5.c8c8a0cfcb03a5ec2465.js"}],"./User":[{"id":86,"name":"./src/client/User.js","file":"6.dbf71b10fe7dddfaef80.js","publicPath":"/6.dbf71b10fe7dddfaef80.js"}]}')},function(e,n,s){"use strict";s.r(n);var t=s(1),i=s.n(t),r=s(4),o=s.n(r),l=s(20),a=s.n(l),c=s(21),d=s.n(c),u=s(22),b=s.n(u),p=s(30),m=s.n(p),f=s(31),h=s.n(f),j=s(3),g=s.n(j),P=s(15),_=s(18),y=s(8),v=s.n(y),x=s(16),w=s.n(x);s(11).config();var S=[new w.a.transports.File({filename:"error.log",level:"error"}),new w.a.transports.File({filename:"combined.log",level:"verbose"})];var q=w.a.createLogger({level:"info",format:w.a.format.json(),transports:S}),k=s(14),I=s.n(k),E=s(25),O=s.n(E),T=s(9),R=s.n(T),C=s(32),A=s.n(C),M=s(26);function U(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),s.push.apply(s,t)}return s}function D(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?U(Object(s),!0).forEach((function(n){v()(e,n,s[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):U(Object(s)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))}))}return e}s(11).config();var L=new M.PubSub,z=new A.a.S3({signatureVersion:"v4",region:"eu-central-1"}),N=I.a.Op,F=process.env.JWT_SECRET;function H(){var e=this.db.models,n=e.Post,s=e.User,t=e.Chat,r=e.Message;return{Post:{user:function(e,n,s){return e.getUser()}},Message:{user:function(e,n,s){return e.getUser()},chat:function(e,n,s){return e.getChat()}},Chat:{messages:function(e,n,s){return e.getMessages({order:[["id","ASC"]]})},users:function(e,n,s){return e.getUsers()},lastMessage:function(e,n,s){return e.getMessages({limit:1,order:[["id","DESC"]]}).then((function(e){return e[0]}))}},RootQuery:{currentUser:function(e,n,s){return s.user},posts:function(e,s,t){return n.findAll({order:[["createdAt","DESC"]]})},chat:function(e,n,i){var o=n.chatId;return t.findByPk(o,{include:[{model:s,required:!0},{model:r}]})},chats:function(e,n,i){return t.findAll({include:[{model:s,required:!0,through:{where:{userId:i.user.id}}},{model:r}]})},postsFeed:function(e,t,i){var r=t.page,o=t.limit,l=t.username,a=0;r&&o&&(a=r*o);var c={order:[["createdAt","DESC"]],offset:a};return o&&(c.limit=o),"undefined"!==g()(l)&&(c.include=[{model:s}],c.where={"$User.username$":l}),{posts:n.findAll(c)}},user:function(e,n,t){var i=n.username;return s.findOne({where:{username:i}})},usersSearch:function(e,n,t){var i=n.page,r=n.limit,o=n.text;if(o.length<3)return{users:[]};var l=0;i&&r&&(l=i*r);var a={order:[["createdAt","DESC"]],offset:l};return r&&(a.limit=r),a.where={username:v()({},N.like,"%"+o+"%")},{users:s.findAll(a)}}},RootMutation:{addPost:function(e,t,i){var r=t.post;return q.log({level:"info",message:"Post was created"}),s.findAll().then((function(e){var s=e[0];return n.create(D({},r)).then((function(e){return Promise.all([e.setUser(s.id)]).then((function(){return e}))}))}))},addChat:function(e,n,s){var i=n.chat;return q.log({level:"info",message:"Message was created"}),t.create().then((function(e){return Promise.all([e.setUsers(i.users)]).then((function(){return e}))}))},addMessage:function(e,n,s){var t=n.message;return q.log({level:"info",message:"Message was created"}),r.create(D({},t)).then((function(e){return Promise.all([e.setUser(s.user.id),e.setChat(t.chatId)]).then((function(){return L.publish("messageAdded",{messageAdded:e}),e}))}))},updatePost:function(e,s,t){var i=s.post,r=s.postId;return n.update(D({},i),{where:{id:r}}).then((function(e){if(1===e[0])return q.log({level:"info",message:"Post "+r+" was updated"}),n.findByPk(r)}))},deletePost:function(e,s,t){var i=s.postId;return n.destroy({where:{id:i}}).then((function(e){return 1===e?(q.log({level:"info",message:"Post "+i+"was deleted"}),{success:!0}):{success:!1}}),(function(e){q.log({level:"error",message:e.message})}))},login:function(e,n,t){var r=n.email,l=n.password;return s.findAll({where:{email:r},raw:!0}).then(function(){var e=o()(i.a.mark((function e(n){var s,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length=1)){e.next=15;break}return s=n[0],e.next=4,O.a.compare(l,s.password);case 4:if(e.sent){e.next=7;break}throw new Error("Password does not match");case 7:return o=R.a.sign({email:r,id:s.id},F,{expiresIn:"1d"}),1,(a=new Date).setDate(a.getDate()+1),t.cookies.set("authorization",o,{signed:!0,expires:a,httpOnly:!0,secure:!1,sameSite:"strict"}),e.abrupt("return",{token:o});case 15:throw new Error("User not found");case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},signup:function(e,n,t){var r=n.email,l=n.password,a=n.username;return s.findAll({where:v()({},N.or,[{email:r},{username:a}]),raw:!0}).then(function(){var e=o()(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.length){e.next=4;break}throw new Error("User already exists");case 4:return e.abrupt("return",O.a.hash(l,10).then((function(e){return s.create({email:r,password:e,username:a,activated:1}).then((function(e){var n=R.a.sign({email:r,id:e.id},F,{expiresIn:"1d"}),s=new Date;return s.setDate(s.getDate()+1),t.cookies.set("authorization",n,{signed:!0,expires:s,httpOnly:!0,secure:!1,sameSite:"strict"}),{token:n}}))})));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},uploadAvatar:function(e,n,t){return o()(i.a.mark((function e(){var r,o,l,a,c,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.file,e.next=3,r;case 3:return o=e.sent,l=o.stream,a=o.filename,o.mimetype,o.encoding,"apollobook-bnngnn",c={Bucket:"apollobook-bnngnn",Key:t.user.id+"/"+a,ACL:"public-read",Body:l},e.next=12,z.upload(c).promise();case 12:return d=e.sent,e.abrupt("return",s.update({avatar:d.Location},{where:{id:t.user.id}}).then((function(){return{filename:a,url:d.Location}})));case 14:case"end":return e.stop()}}),e)})))()},logout:function(e,n,s){return s.cookies.set("authorization","",{signed:!0,expires:new Date,httpOnly:!0,secure:!1,sameSite:"strict"}),{message:!0}}},RootSubscription:{messageAdded:{subscribe:Object(M.withFilter)((function(){return L.asyncIterator("messageAdded")}),(function(e,n,i){return e.messageAdded.UserId!==i.user.id&&t.findOne({where:{id:e.messageAdded.ChatId},include:[{model:s,required:!0,through:{where:{userId:i.user.id}}}]}).then((function(e){return null!==e}))}))}}}}var B=["\n  directive @auth on QUERY | FIELD_DEFINITION | FIELD\n  enum CacheControlScope {\n    PUBLIC\n    PRIVATE\n  }\n  \n  directive @cacheControl (\n    maxAge: Int\n    scope: CacheControlScope\n  ) on FIELD_DEFINITION | OBJECT | INTERFACE\n  scalar Upload\n\n  type User @cacheControl(maxAge: 120) {\n    id: Int\n    avatar: String @cacheControl(maxAge: 240)\n    username: String\n    email: String\n  }\n\n  type Post {\n    id: Int\n    text: String\n    user: User\n  }\n\n  type Message {\n    id: Int\n    text: String\n    chat: Chat\n    user: User\n  }\n\n  type Chat {\n    id: Int\n    messages: [Message]\n    users: [User]\n    lastMessage: Message\n  }\n\n  type PostFeed {\n    posts: [Post]\n  }\n\n  type File {\n    filename: String!\n    url: String!\n  }\n\n  input PostInput {\n    text: String!\n  }\n  \n  input UserInput {\n    username: String!\n    avatar: String!\n  }\n\n  input ChatInput {\n    users: [Int]\n  }\n\n  input MessageInput {\n    text: String!\n    chatId: Int!\n  }\n\n  type Response {\n    success: Boolean\n  }\n\n  type UsersSearch {\n    users: [User]\n  }\n\n  type Auth {\n    token: String\n  }\n  \n  type RootMutation {\n    addPost (\n      post: PostInput!\n    ): Post\n    addChat (\n      chat: ChatInput!\n    ): Chat\n    addMessage (\n      message: MessageInput!\n    ): Message\n    updatePost (\n      post: PostInput!\n      postId: Int!\n    ): Post\n    deletePost (\n      postId: Int!\n    ): Response\n    login (\n      email: String!\n      password: String!\n    ): Auth\n    signup (\n      username: String!\n      email: String!\n      password: String!\n    ): Auth\n    uploadAvatar (\n      file: Upload!\n    ): File @auth\n    logout: Response @auth\n  }\n\n  type RootQuery {\n    posts: [Post]\n    chats: [Chat]\n    chat(chatId: Int): Chat\n    postsFeed(page: Int, limit: Int, username: String): PostFeed @auth\n    user(username: String!): User @auth\n    usersSearch(page: Int, limit: Int, text: String!): UsersSearch\n    currentUser: User @auth\n  }\n\n  type RootSubscription {\n    messageAdded: Message\n  }\n\n  schema {\n    query: RootQuery\n    mutation: RootMutation\n    subscription: RootSubscription\n  }\n"],G=s(5),W=s.n(G),J=s(6),Q=s.n(J),V=s(10),K=s.n(V),Y=s(2),X=s.n(Y),$=s(7),Z=s.n($);function ee(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ne=function(e){Z()(t,e);var n,s=(n=t,function(){var e,s=X()(n);if(ee()){var t=X()(this).constructor;e=Reflect.construct(s,arguments,t)}else e=s.apply(this,arguments);return K()(this,e)});function t(){return W()(this,t),s.apply(this,arguments)}return Q()(t,[{key:"visitFieldDefinition",value:function(e){var n=e.resolve,s=void 0===n?defaultFieldResolver:n;e.resolve=o()(i.a.mark((function e(){var n,t,r,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o.length,t=new Array(n),r=0;r<n;r++)t[r]=o[r];if(!t[2].user){e.next=8;break}return e.next=5,s.apply(this,t);case 5:return e.abrupt("return",e.sent);case 8:throw new P.AuthenticationError("You need to be logged in.");case 9:case"end":return e.stop()}}),e,this)})))}}]),t}(P.SchemaDirectiveVisitor);s(11).config();var se=process.env,te=se.JWT_SECRET,ie=se.ENGINE_KEY,re=function(e){var n,s=Object(_.makeExecutableSchema)({typeDefs:B,resolvers:H.call(e),schemaDirectives:{auth:ne}});return new P.ApolloServer({schema:s,introspection:!0,engine:{apiKey:ie,generateClientInfo:function(e){var n=e.request.http.headers,s=n.get("apollo-client-name"),t=n.get("apollo-client-version");return s&&t?{clientName:s,clientVersion:t}:{clientName:"Unknown Client",clientVersion:"Unversioned"}}},cacheControl:{defaultMaxAge:5,stripFormattedExtensions:!1,calculateCacheControlHeaders:!0},context:(n=o()(i.a.mark((function n(s){var t,r,o,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=s.req,r=t.headers.authorization,"undefined"===g()(r)){n.next=9;break}return o=new RegExp("Bearer","ig"),l=r.replace(o,"").trim(),n.abrupt("return",R.a.verify(l,te,(function(n,s){return n?t:e.db.models.User.findByPk(s.id).then((function(e){return Object.assign({},t,{user:e})}))})));case 9:return n.abrupt("return",t);case 10:case"end":return n.stop()}}),n)}))),function(e){return n.apply(this,arguments)})})},oe=s(33),le=s(27);s(11).config();var ae=process.env.JWT_SECRET,ce=function(e){return function(n){var s,t=Object(_.makeExecutableSchema)({typeDefs:B,resolvers:H.call(e),schemaDirectives:{auth:ne}});new oe.SubscriptionServer({execute:le.execute,subscribe:le.subscribe,schema:t,onConnect:(s=o()(i.a.mark((function n(s,t){var r,o,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=s.authToken,"undefined"===g()(r)){n.next=8;break}return o=new RegExp("Bearer","ig"),l=r.replace(o,"").trim(),n.abrupt("return",R.a.verify(l,ae,(function(n,s){if(n)throw new Error("Missing auth token!");return e.db.models.User.findByPk(s.id).then((function(e){return Object.assign({},t.upgradeReq,{user:e})}))})));case 8:throw new Error("Missing auth token!");case 9:case"end":return n.stop()}}),n)}))),function(e,n){return s.apply(this,arguments)})},{server:n,path:"/subscriptions"})}},de=s(34),ue=s.n(de);s(11).config();s(11).config();var be,pe,me,fe=ue.a.production,he=new I.a(fe.database,fe.username,fe.password,fe),je={models:(be=he,pe={},me=s(49),me.keys().map(me).forEach((function(e){var n=e(be,I.a);pe[n.name]=n})),Object.keys(pe).forEach((function(e){pe[e].associate&&pe[e].associate(pe)})),pe),sequelize:he},ge=s(35),Pe=s(36),_e=s(37),ye=s(38),ve=s(39),xe=s(40),we=s.n(xe),Se=s(41);function qe(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),s.push.apply(s,t)}return s}function ke(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?qe(Object(s),!0).forEach((function(n){v()(e,n,s[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qe(Object(s)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))}))}return e}var Ie=function(e,n){return new ge.ApolloClient({ssrMode:!0,link:ye.ApolloLink.from([Object(_e.onError)((function(e){var n=e.graphQLErrors,s=e.networkError;n&&(n.map((function(e){var n=e.message,s=e.locations,t=e.path;e.extensions;console.log("[GraphQL error]: Message: ".concat(n,", \n                    Location: ").concat(s,", Path: ").concat(t))})),s&&console.log("[Network error]: ".concat(s)))})),function(e,n){return e.setContext((function(e){return ke({},e,{headers:ke({},e.headers,{"apollo-client-name":"Apollo Backend Client","apollo-client-version":"1"})})})),n(e)},function(s,t){return n&&s.setContext((function(n){return ke({},n,{headers:ke({},n.headers,{Authorization:e.cookies.get("authorization")})})})),t(s)},Object(Se.createPersistedQueryLink)().concat(new ve.HttpLink({uri:"http://localhost:8000/graphql",credentials:"same-origin",fetch:we.a}))]),cache:new Pe.InMemoryCache})},Ee=s(0),Oe=s.n(Ee),Te=s(13),Re=s(24),Ce=s.n(Re),Ae=s(19),Me=s(42),Ue=s(43);Me.library.add(Ue.faAngleDown);var De=s(23),Le=s.n(De),ze=s(28),Ne=s.n(ze),Fe=s(12),He=s.n(Fe),Be=s(17);function Ge(e){return function(){var n,s=X()(e);if(We()){var t=X()(this).constructor;n=Reflect.construct(s,arguments,t)}else n=s.apply(this,arguments);return K()(this,n)}}function We(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Je,Qe=He()({loader:function(){return Promise.all([s.e(0),s.e(4)]).then(s.bind(null,66))},modules:["./User"],webpack:function(){return[66]},loading:Be.a}),Ve=He()({loader:function(){return Promise.all([s.e(0),s.e(3)]).then(s.bind(null,67))},modules:["./Main"],webpack:function(){return[67]},loading:Be.a}),Ke=He()({loader:function(){return s.e(2).then(s.bind(null,68))},modules:["./components/loginregister"],webpack:function(){return[68]},loading:Be.a}),Ye=s(47);if("undefined"!==("undefined"==typeof window?"undefined":g()(window))){var Xe=Ye.BrowserRouter;Je=Xe}else{var $e=Ye.StaticRouter;Je=$e}var Ze=Ye.Route,en=Ye.Redirect,nn=Ye.Switch,sn=function(e){var n=e.component,s=Ne()(e,["component"]);return Oe.a.createElement(Ze,Le()({},s,{render:function(e){return!0===s.loggedIn?Oe.a.createElement(n,e):Oe.a.createElement(en,{to:{pathname:"/",state:{from:e.location}}})}}))},tn=function(e){Z()(s,e);var n=Ge(s);function s(){return W()(this,s),n.apply(this,arguments)}return Q()(s,[{key:"render",value:function(){return Oe.a.createElement(en,{to:"/"})}}]),s}(Ee.Component),rn=function(e){var n=e.component,s=Ne()(e,["component"]);return Oe.a.createElement(Ze,Le()({},s,{render:function(e){return!1===s.loggedIn?Oe.a.createElement(n,e):Oe.a.createElement(en,{to:{pathname:"undefined"!==g()(e.location.state)?e.location.state.from.pathname:"/app"}})}}))},on=function(e){Z()(s,e);var n=Ge(s);function s(){return W()(this,s),n.apply(this,arguments)}return Q()(s,[{key:"render",value:function(){var e=this;return Oe.a.createElement(Je,{context:this.props.context,location:this.props.location},Oe.a.createElement(nn,null,Oe.a.createElement(sn,{path:"/app",component:function(){return Oe.a.createElement(Ve,{changeLoginState:e.props.changeLoginState})},loggedIn:this.props.loggedIn}),Oe.a.createElement(sn,{path:"/user/:username",component:function(n){return Oe.a.createElement(Qe,Le()({},n,{changeLoginState:e.props.changeLoginState}))},loggedIn:this.props.loggedIn}),Oe.a.createElement(rn,{exact:!0,path:"/",component:function(){return Oe.a.createElement(Ke,{changeLoginState:e.props.changeLoginState})},loggedIn:this.props.loggedIn}),Oe.a.createElement(Ze,{component:tn})))}}]),s}(Ee.Component);function ln(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var an=function(e){Z()(t,e);var n,s=(n=t,function(){var e,s=X()(n);if(ln()){var t=X()(this).constructor;e=Reflect.construct(s,arguments,t)}else e=s.apply(this,arguments);return K()(this,e)});function t(){var e;W()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=s.call.apply(s,[this].concat(i)),v()(Ce()(e),"state",{loggedIn:e.props.loggedIn}),v()(Ce()(e),"changeLoginState",(function(n){e.setState({loggedIn:n})})),e}return Q()(t,[{key:"render",value:function(){return Oe.a.createElement("div",null,Oe.a.createElement(Ae.Helmet,null,Oe.a.createElement("title",null,"Graphbook - Feed"),Oe.a.createElement("meta",{name:"description",content:"Newsfeed of all your friends on Graphbook"})),Oe.a.createElement(on,{loggedIn:this.state.loggedIn,changeLoginState:this.changeLoginState,location:this.props.location,context:this.props.context}))}}]),t}(Ee.Component),cn=Object(Te.withApollo)(an);function dn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var un=function(e){Z()(t,e);var n,s=(n=t,function(){var e,s=X()(n);if(dn()){var t=X()(this).constructor;e=Reflect.construct(s,arguments,t)}else e=s.apply(this,arguments);return K()(this,e)});function t(){return W()(this,t),s.apply(this,arguments)}return Q()(t,[{key:"render",value:function(){var e=this.props,n=e.client,s=e.location,t=e.context,i=e.loggedIn;return Oe.a.createElement(Te.ApolloProvider,{client:n},Oe.a.createElement(cn,{location:s,context:t,loggedIn:i}))}}]),t}(Oe.a.Component),bn=s(29),pn=s.n(bn);function mn(e,n,s,t){return'\n    <html lang="en">\n      <head>\n        <meta charSet="UTF-8"/>\n        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>\n        <meta httpEquiv="X-UA-Compatible" content="ie=edge"/>\n        <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon"> \n        '.concat("<link rel='stylesheet' href='/bundle.css'/>","\n        ").concat(n.title.toString(),"\n        ").concat(n.meta.toString(),"\n      </head>\n      <body>\n        ").concat(pn.a.renderToStaticMarkup(Oe.a.createElement("div",{id:"root",dangerouslySetInnerHTML:{__html:e}})),"\n        ").concat(pn.a.renderToStaticMarkup(Oe.a.createElement("script",{dangerouslySetInnerHTML:{__html:"window.__APOLLO_STATE__=".concat(JSON.stringify(s).replace(/</g,"\\u003c"))}})),"\n        ").concat(t.map((function(e){return'<script src="'.concat(e.publicPath,'"><\/script>')})).join("\n"),'\n        <script src="/bundle.js"><\/script>\n      </body>\n    </html>\n  ')}s(11).config();var fn=s(44),hn=s.n(fn),jn=s(45),gn=s(46);s(11).config();var Pn,_n=s(54),yn=process.env.JWT_SECRET,vn={graphql:re(Pn={db:je}),subscriptions:ce(Pn)},xn=d.a.join(__dirname,"../../"),wn=a()(),Sn=Object(jn.createServer)(wn);wn.use(b()()),wn.use(b.a.contentSecurityPolicy({directives:{defaultSrc:["'self'"],scriptSrc:["'self'","'unsafe-inline'"],styleSrc:["'self'","'unsafe-inline'"],imgSrc:["'self'","data:","*.amazonaws.com"]}})),wn.use(h()()),wn.use(m()()),wn.use(b.a.referrerPolicy({policy:"same-origin"})),wn.use("/",a.a.static(d.a.join(xn,"dist/client"))),wn.use("/uploads",a.a.static(d.a.join(xn,"uploads"))),wn.use((function(e,n,s){e.cookies=new hn.a(e,n,{keys:["Some random keys"]}),s()}));for(var qn=Object.keys(vn),kn=function(e){var n=qn[e];switch(n){case"graphql":vn[n].applyMiddleware({app:wn});break;case"subscriptions":He.a.preloadAll().then((function(){Sn.listen(process.env.PORT?process.env.PORT:8e3,(function(){console.log("Listening on port "+(process.env.PORT?process.env.PORT:8e3)+"!"),vn[n](Sn)}))}));break;default:wn.use("/".concat(n),vn[n])}},In=0;In<qn.length;In+=1)kn(In);wn.get("*",function(){var e=o()(i.a.mark((function e(n,s){var t,r,o,l,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.cookies.get("authorization",{signed:!0}),e.prev=1,e.next=4,R.a.verify(t,yn);case 4:r=!0,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r=!1;case 10:o=Ie(n,r),l={},a=[],c=Oe.a.createElement(Fe.Capture,{report:function(e){return a.push(e)}},Oe.a.createElement(un,{client:o,loggedIn:r,location:n.url,context:l})),Object(Te.renderToStringWithData)(c).then((function(e){if(l.url)s.redirect(301,l.url);else{var n;n=Object(gn.getBundles)(_n,Array.from(new Set(a)));var t=o.extract(),i=Ae.Helmet.renderStatic();s.status(200),s.send("<!doctype html>\n".concat(mn(e,i,t,n))),s.end()}}));case 15:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(n,s){return e.apply(this,arguments)}}());n.default=Sn},function(e,n){e.exports=require("@babel/runtime/helpers/taggedTemplateLiteral")},function(e,n){e.exports=require("graphql-tag")},function(e,n){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,n){e.exports=require("react-toastify")},function(e,n){e.exports=require("react-infinite-scroller")},function(e,n){e.exports=require("@fortawesome/react-fontawesome")},function(e,n){e.exports=require("prop-types")},function(e,n){e.exports=require("react-modal")},function(e,n){e.exports=require("@synapsestudios/react-drop-n-crop")},function(e,n){e.exports=require("react-router")}]);