exports.ids=[0],exports.modules={69:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(5),a=n.n(r),c=n(6),o=n.n(c),u=n(10),i=n.n(u),s=n(2),l=n.n(s),f=n(7),p=n.n(f),h=n(0),d=n.n(h);function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var m=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(v()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"render",value:function(){var t=this.props.children;return d.a.createElement("div",{className:"error message"},t)}}]),r}(h.Component)},70:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var r=n(5),a=n.n(r),c=n(6),o=n.n(c),u=n(10),i=n.n(u),s=n(2),l=n.n(s),f=n(7),p=n.n(f),h=n(56),d=n.n(h),v=n(0),m=n.n(v),y=n(13),g=n(57);function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function E(){var t=d()(["\n  query currentUser {\n    currentUser {\n      id\n      username\n      avatar\n    }\n  }\n"]);return E=function(){return t},t}var b=n.n(g)()(E()),C=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(R()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"render",value:function(){var t=this.props.children;return m.a.createElement(y.ApolloConsumer,null,(function(e){var n=e.readQuery({query:b}).currentUser;return m.a.Children.map(t,(function(t){return m.a.cloneElement(t,{user:n})}))}))}}]),r}(v.Component)},71:function(t,e,n){"use strict";n.d(e,"a",(function(){return D}));var r=n(3),a=n.n(r),c=n(5),o=n.n(c),u=n(6),i=n.n(u),s=n(10),l=n.n(s),f=n(2),p=n.n(f),h=n(7),d=n.n(h),v=n(56),m=n.n(v),y=n(0),g=n.n(y),R=n(13),E=n(17),b=n(69),C=n(57);function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function k(){var t=m()(["\n  query postsFeed($page: Int, $limit: Int, $username: String) { \n    postsFeed(page: $page, limit: $limit, username: $username) { \n      posts {\n        id\n        text\n        user {\n          avatar\n          username\n        }\n      }\n    }\n  }\n"]);return k=function(){return t},t}var x=n.n(C)()(k()),D=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=p()(e);if(P()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function r(){return o()(this,r),n.apply(this,arguments)}return i()(r,[{key:"getVariables",value:function(){var t=this.props.variables,e={page:0,limit:10};return"undefined"!==a()(t)&&("undefined"!==a()(t.page)&&(e.page=t.page),"undefined"!==a()(t.limit)&&(e.limit=t.limit)),"undefined"!==a()(t.username)&&(e.username=t.username),e}},{key:"render",value:function(){var t=this.props.children,e=this.getVariables();return g.a.createElement(R.Query,{query:x,variables:e},(function(e){var n=e.loading,r=e.error,a=e.data,c=e.fetchMore;if(n)return g.a.createElement(E.a,null);if(r)return g.a.createElement(b.a,null,g.a.createElement("p",null,r.message));var o=a.postsFeed.posts;return g.a.Children.map(t,(function(t){return g.a.cloneElement(t,{posts:o,fetchMore:c})}))}))}}]),r}(y.Component)},72:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var r=n(3),a=n.n(r),c=n(5),o=n.n(c),u=n(6),i=n.n(u),s=n(24),l=n.n(s),f=n(10),p=n.n(f),h=n(2),d=n.n(h),v=n(7),m=n.n(v),y=n(8),g=n.n(y),R=n(0),E=n.n(R);function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var C=function(t){m()(r,t);var e,n=(e=r,function(){var t,n=d()(e);if(b()){var r=d()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p()(this,t)});function r(){var t;o()(this,r);for(var e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return t=n.call.apply(n,[this].concat(a)),g()(l()(t),"handlePostContentChange",(function(e){t.props.changePostContent(e.target.value)})),t}return i()(r,[{key:"render",value:function(){var t=this,e=this.props,n=e.addPost,r=e.updatePost,c=e.postContent,o=e.postId;return E.a.createElement("div",{className:"postForm"},E.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"undefined"!==a()(r)?r({variables:{post:{text:c},postId:o}}).then((function(){t.props.changeState()})):n({variables:{post:{text:c}}}).then((function(){t.props.changePostContent("")}))}},E.a.createElement("textarea",{value:c,onChange:t.handlePostContentChange,placeholder:"Write your custom post!"}),E.a.createElement("input",{type:"submit",value:"Submit"})))}}]),r}(R.Component)},73:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var r=n(5),a=n.n(r),c=n(6),o=n.n(c),u=n(10),i=n.n(u),s=n(2),l=n.n(s),f=n(7),p=n.n(f),h=n(56),d=n.n(h),v=n(0),m=n.n(v),y=n(13),g=n(17),R=n(69),E=n(57);function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function C(){var t=d()(["\n  query currentUser { \n    currentUser { \n      id\n      username\n      avatar\n    }\n  }\n"]);return C=function(){return t},t}var P=n.n(E)()(C()),k=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(b()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"render",value:function(){var t=this.props.children;return m.a.createElement(y.Query,{query:P},(function(e){var n=e.loading,r=e.error,a=e.data;if(n)return m.a.createElement(g.a,null);if(r)return m.a.createElement(R.a,null,m.a.createElement("p",null,r.message));var c=a.currentUser;return m.a.Children.map(t,(function(t){return m.a.cloneElement(t,{currentUser:c})}))}))}}]),r}(v.Component)},74:function(t,e,n){"use strict";n.d(e,"a",(function(){return lt}));var r=n(5),a=n.n(r),c=n(6),o=n.n(c),u=n(10),i=n.n(u),s=n(2),l=n.n(s),f=n(7),p=n.n(f),h=n(0),d=n.n(h),v=n(24),m=n.n(v),y=n(8),g=n.n(y),R=n(3),E=n.n(R),b=n(56),C=n.n(b),P=n(13),k=(n(17),n(69),n(57)),x=n.n(k);function D(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function S(){var t=C()(["\n    query usersSearch($page: Int, $limit: Int, $text: String!) { \n        usersSearch(page: $page, limit: $limit, text: $text) { \n            users {\n                id\n                avatar\n                username\n            }\n        }\n    }\n"]);return S=function(){return t},t}var w=x()(S()),O=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(D()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"getVariables",value:function(){var t=this.props.variables,e={page:0,limit:5,text:""};return"undefined"!==E()(t)&&("undefined"!==E()(t.page)&&(e.page=t.page),"undefined"!==E()(t.limit)&&(e.limit=t.limit),"undefined"!==E()(t.text)&&(e.text=t.text)),e}},{key:"render",value:function(){var t=this.props.children,e=this.getVariables(),n=e.text.length<3;return d.a.createElement(P.Query,{query:w,variables:e,skip:n},(function(n){var r=n.loading,a=n.error,c=n.data,o=n.fetchMore,u=n.refetch;if(r||a||"undefined"===E()(c))return null;var i=c.usersSearch.users;return d.a.Children.map(t,(function(t){return d.a.cloneElement(t,{users:i,fetchMore:o,variables:e,refetch:u})}))}))}}]),r}(h.Component);function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var A=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(I()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){var t;a()(this,r);for(var e=arguments.length,c=new Array(e),o=0;o<e;o++)c[o]=arguments[o];return t=n.call.apply(n,[this].concat(c)),g()(m()(t),"closeList",(function(){t.setState({showList:!1})})),g()(m()(t),"state",{showList:t.checkLength(t.props.users)}),t}return o()(r,[{key:"componentWillReceiveProps",value:function(t){this.showList(t.users)}},{key:"checkLength",value:function(t){return t.length>0&&(document.addEventListener("click",this.closeList),!0)}},{key:"showList",value:function(t){this.checkLength(t)?this.setState({showList:!0}):this.closeList()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.closeList)}},{key:"render",value:function(){var t=this.props.users;return this.state.showList&&d.a.createElement("div",{className:"result"},t.map((function(t,e){return d.a.createElement("div",{key:t.id,className:"user"},d.a.createElement("img",{src:t.avatar}),d.a.createElement("span",null,t.username))})))}}]),r}(h.Component);function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var j=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(M()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){var t;a()(this,r);for(var e=arguments.length,c=new Array(e),o=0;o<e;o++)c[o]=arguments[o];return t=n.call.apply(n,[this].concat(c)),g()(m()(t),"state",{text:""}),g()(m()(t),"changeText",(function(e){t.setState({text:e.target.value})})),t}return o()(r,[{key:"render",value:function(){var t=this.state.text;return d.a.createElement("div",{className:"search"},d.a.createElement("input",{type:"text",onChange:this.changeText,value:t}),d.a.createElement(O,{variables:{text:t}},d.a.createElement(A,null)))}}]),r}(h.Component);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function q(){var t=C()(["\n  mutation uploadAvatar($file: Upload!) {\n    uploadAvatar(file : $file) {\n      filename\n      url\n    }\n  }\n"]);return q=function(){return t},t}function L(){var t=C()(["\n  query currentUser { \n    currentUser { \n      id\n      username\n      avatar\n    }\n  }\n"]);return L=function(){return t},t}var F=x()(L()),_=x()(q()),Q=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if($()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"render",value:function(){var t=this.props.children;return d.a.createElement(P.Mutation,{update:function(t,e){var n=e.data.uploadAvatar,r={query:F},a=t.readQuery(r);a.currentUser.avatar=n.url,t.writeQuery(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r,{data:a}))},mutation:_},(function(e){return d.a.Children.map(t,(function(t){return d.a.cloneElement(t,{uploadAvatar:e})}))}))}}]),r}(h.Component),T=n(63),U=n.n(T),W=n(64),V=n.n(W);function H(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}U.a.setAppElement("#root");var K={content:{width:"400px",height:"450px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};function B(t){for(var e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return new Blob([r],{type:n})}var X=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(H()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){var t;a()(this,r);for(var e=arguments.length,c=new Array(e),o=0;o<e;o++)c[o]=arguments[o];return t=n.call.apply(n,[this].concat(c)),g()(m()(t),"state",{result:null,filename:null,filetype:null,src:null,error:null}),g()(m()(t),"onChange",(function(e){t.setState(e)})),g()(m()(t),"uploadAvatar",(function(){var e=m()(t),n=B(t.state.result);n.name=t.state.filename,t.props.uploadAvatar({variables:{file:n}}).then((function(){e.props.showModal()}))})),g()(m()(t),"changeImage",(function(){t.setState({src:null})})),t}return o()(r,[{key:"render",value:function(){return d.a.createElement(U.a,{isOpen:this.props.isOpen,onRequestClose:this.props.showModal,contentLabel:"Change avatar",style:K},d.a.createElement(V.a,{onChange:this.onChange,value:this.state}),null!==this.state.src&&d.a.createElement("button",{className:"cancelUpload",onClick:this.changeImage},"Change image"),d.a.createElement("button",{className:"uploadAvatar",onClick:this.uploadAvatar},"Save"))}}]),r}(h.Component);function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var G=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(z()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){var t;a()(this,r);for(var e=arguments.length,c=new Array(e),o=0;o<e;o++)c[o]=arguments[o];return t=n.call.apply(n,[this].concat(c)),g()(m()(t),"state",{isOpen:!1}),g()(m()(t),"showModal",(function(){t.setState({isOpen:!t.state.isOpen})})),t}return o()(r,[{key:"render",value:function(){var t=this.props.user;return t?d.a.createElement("div",{className:"user"},d.a.createElement("img",{src:t.avatar,onClick:this.showModal}),d.a.createElement(Q,null,d.a.createElement(X,{isOpen:this.state.isOpen,showModal:this.showModal})),d.a.createElement("span",null,t.username)):null}}]),r}(h.Component),J=n(70);function Y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Z=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(Y()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){var t;a()(this,r);for(var e=arguments.length,c=new Array(e),o=0;o<e;o++)c[o]=arguments[o];return t=n.call.apply(n,[this].concat(c)),g()(m()(t),"logout",(function(){t.props.logout().then((function(){localStorage.removeItem("jwt"),t.props.client.resetStore()}))})),t}return o()(r,[{key:"render",value:function(){return d.a.createElement("button",{className:"logout",onClick:this.logout},"Logout")}}]),r}(h.Component),tt=Object(P.withApollo)(Z),et=n(65);function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var rt=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(nt()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){var t;a()(this,r);for(var e=arguments.length,c=new Array(e),o=0;o<e;o++)c[o]=arguments[o];return t=n.call.apply(n,[this].concat(c)),g()(m()(t),"goHome",(function(){t.props.history.push("/app")})),t}return o()(r,[{key:"render",value:function(){return d.a.createElement("button",{className:"goHome",onClick:this.goHome},"Home")}}]),r}(h.Component),at=Object(et.withRouter)(rt);function ct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ot(){var t=C()(["\n  mutation logout {\n    logout {\n      success\n    }\n  }\n"]);return ot=function(){return t},t}var ut=x()(ot()),it=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(ct()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"render",value:function(){var t=this.props.children;return d.a.createElement(P.Mutation,{mutation:ut},(function(e,n){var r=n.loading,a=n.error;return d.a.Children.map(t,(function(t){return d.a.cloneElement(t,{logout:e,loading:r,error:a})}))}))}}]),r}(h.Component);function st(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var lt=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=l()(e);if(st()){var r=l()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"render",value:function(){return d.a.createElement("div",{className:"topbar"},d.a.createElement("div",{className:"inner"},d.a.createElement(j,null),d.a.createElement(J.a,null,d.a.createElement(G,null))),d.a.createElement("div",{className:"buttons"},d.a.createElement(at,null),d.a.createElement(it,null,d.a.createElement(tt,{changeLoginState:this.props.changeLoginState}))))}}]),r}(h.Component)},75:function(t,e,n){"use strict";n.d(e,"a",(function(){return ut}));var r=n(5),a=n.n(r),c=n(6),o=n.n(c),u=n(24),i=n.n(u),s=n(10),l=n.n(s),f=n(2),p=n.n(f),h=n(7),d=n.n(h),v=n(8),m=n.n(v),y=n(0),g=n.n(y),R=n(56),E=n.n(R),b=n(13),C=n(57),P=n.n(C);function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function x(){var t=E()(["\n  mutation addMessage($message: MessageInput!) {\n    addMessage(message: $message) {\n      id\n      text\n      user {\n        id\n      }\n    }\n  }\n"]);return x=function(){return t},t}function D(){var t=E()(["\n  query chat($chatId: Int!) {\n    chat(chatId: $chatId) {\n      id\n      users {\n        id\n        avatar\n        username\n      }\n      messages {\n        id\n        text\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return D=function(){return t},t}var S=P()(D()),w=P()(x()),O=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=p()(e);if(k()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.chat;return g.a.createElement(b.Mutation,{update:function(t,e){var r=e.data.addMessage,a=t.readQuery({query:S,variables:{chatId:n.id}});a.chat.messages.push(r),t.writeQuery({query:S,variables:{chatId:n.id},data:a})},mutation:w},(function(t){return g.a.Children.map(e,(function(e){return g.a.cloneElement(e,{addMessage:t})}))}))}}]),r}(y.Component);function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var A=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=p()(e);if(I()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function r(){var t;a()(this,r);for(var e=arguments.length,c=new Array(e),o=0;o<e;o++)c[o]=arguments[o];return t=n.call.apply(n,[this].concat(c)),m()(i()(t),"state",{value:""}),m()(i()(t),"handleKeyPress",(function(e){var n=i()(t),r=t.props,a=r.chat,c=r.addMessage;"Enter"===e.key&&t.state.value.length&&c({variables:{message:{text:t.state.value,chatId:a.id}}}).then((function(){n.setState({value:""})}))})),m()(i()(t),"onChangeChatInput",(function(e){e.preventDefault(),t.setState({value:e.target.value})})),t}return o()(r,[{key:"render",value:function(){return g.a.createElement("div",{className:"input"},g.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onChangeChatInput,onKeyPress:this.handleKeyPress}))}}]),r}(y.Component);function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var j=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=p()(e);if(M()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"render",value:function(){var t=this.props,e=t.chat,n=t.closeChat;t.user;return g.a.createElement("div",{className:"chatWindow"},g.a.createElement("div",{className:"header"},g.a.createElement("span",null,e.users[1].username),g.a.createElement("button",{className:"close",onClick:function(){return n(e.id)}},"X")),g.a.createElement("div",{className:"messages"},e.messages.map((function(t,e){return g.a.createElement("div",{key:"message"+t.id,className:"message "+(t.user.id>1?"left":"right")},t.text)}))),g.a.createElement(O,{chat:e},g.a.createElement(A,{chat:e})))}}]),r}(y.Component),N=n(3),$=n.n(N),q=n(17),L=n(69);function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _(){var t=E()(["\n  query chat($chatId: Int!) {\n    chat(chatId: $chatId) {\n      id\n      users {\n        id\n        avatar\n        username\n      }\n      messages {\n        id\n        text\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return _=function(){return t},t}var Q=P()(_()),T=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=p()(e);if(F()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"getVariables",value:function(){var t=this.props.variables,e={};return"undefined"!==$()(t.chatId)&&(e.chatId=t.chatId),e}},{key:"render",value:function(){var t=this.props.children,e=this.getVariables();return g.a.createElement(b.Query,{query:Q,variables:e},(function(e){var n=e.loading,r=e.error,a=e.data,c=e.subscribeToMore;if(n)return g.a.createElement(q.a,null);if(r)return g.a.createElement(L.a,null,g.a.createElement("p",null,r.message));var o=a.chat;return g.a.Children.map(t,(function(t){return g.a.cloneElement(t,{chat:o,subscribeToMore:c})}))}))}}]),r}(y.Component);function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function W(){var t=E()(["\n  query chats {\n    chats {\n      id\n      users {\n        id\n        avatar\n        username\n      }\n      lastMessage {\n        text\n      }\n    }\n  }\n"]);return W=function(){return t},t}var V=P()(W()),H=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=p()(e);if(U()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"render",value:function(){var t=this.props.children;return g.a.createElement(b.Query,{query:V},(function(e){var n=e.loading,r=e.error,a=e.data,c=e.subscribeToMore;if(n)return g.a.createElement(q.a,null);if(r)return g.a.createElement(L.a,null,g.a.createElement("p",null,r.message));var o=a.chats;return g.a.Children.map(t,(function(t){return g.a.cloneElement(t,{chats:o,subscribeToMore:c})}))}))}}]),r}(y.Component),K=n(58),B=n.n(K);function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function z(){var t=E()(["\n  subscription onMessageAdded {\n    messageAdded {\n      id\n      text\n      chat {\n        id\n      }\n      user {\n        id\n        __typename\n      }\n      __typename\n    }\n  }\n"]);return z=function(){return t},t}var G=P()(z()),J=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=p()(e);if(X()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function r(){var t;a()(this,r);for(var e=arguments.length,c=new Array(e),o=0;o<e;o++)c[o]=arguments[o];return t=n.call.apply(n,[this].concat(c)),m()(i()(t),"subscribeToNewMessages",(function(){var e=i()(t),n=t.props.user;t.props.subscribeToMore({document:G,updateQuery:function(t,r){var a=r.subscriptionData;if(!a.data||!t.chats.length)return t;for(var c=-1,o=0;o<t.chats.length;o++)if(t.chats[o].id==a.data.messageAdded.chat.id){c=o;break}if(-1===c)return t;var u=Object.assign({},t.chats[o],{lastMessage:{text:a.data.messageAdded.text,__typename:a.data.messageAdded.__typename}}),i={chats:B()(t.chats)};i.chats[o]=u;try{var s=e.props.client.store.cache.readQuery({query:S,variables:{chatId:a.data.messageAdded.chat.id}});n.id!==a.data.messageAdded.user.id&&(s.chat.messages.push(a.data.messageAdded),e.props.client.store.cache.writeQuery({query:S,variables:{chatId:a.data.messageAdded.chat.id},data:s}))}catch(t){}return i}})})),m()(i()(t),"usernamesToString",(function(e){for(var n=t.props.user,r="",a=0;a<e.length;a++)e[a].username!==n.username&&(r+=e[a].username),a-1===e.length&&(r+=", ");return r})),m()(i()(t),"getAvatar",(function(e){var n=t.props.user;return e.length>2?"/public/group.png":e[0].id!==n.id?e[0].avatar:e[1].avatar})),t}return o()(r,[{key:"componentDidMount",value:function(){this.subscribeToNewMessages()}},{key:"shorten",value:function(t){return t.length?t.length>12?t.substring(0,t.length-9)+"...":t:""}},{key:"render",value:function(){var t=this,e=this.props.chats;return g.a.createElement("div",{className:"chats"},e.map((function(e,n){return g.a.createElement("div",{key:"chat"+e.id,className:"chat",onClick:function(){return t.props.openChat(e.id)}},g.a.createElement("div",{className:"header"},g.a.createElement("img",{src:t.getAvatar(e.users)}),g.a.createElement("div",null,g.a.createElement("h2",null,t.shorten(t.usernamesToString(e.users))),g.a.createElement("span",null,e.lastMessage&&t.shorten(e.lastMessage.text)))))})))}}]),r}(y.Component),Y=Object(b.withApollo)(J),Z=n(59);function tt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function et(){var t=E()(["\n  subscription onMessageAdded {\n    messageAdded {\n      id\n      text\n      chat {\n        id\n      }\n      user {\n        id\n        __typename\n      }\n      __typename\n    }\n  }\n"]);return et=function(){return t},t}var nt=P()(et()),rt=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=p()(e);if(tt()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"render",value:function(){var t=this.props.children;return g.a.createElement(b.Subscription,{subscription:nt},(function(e){var n=e.data;return g.a.Children.map(t,(function(t){return g.a.cloneElement(t,{data:n})}))}))}}]),r}(y.Component);function at(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ct=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=p()(e);if(at()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"componentWillReceiveProps",value:function(t){"undefined"!==$()(t.data)&&"undefined"!==$()(t.data.messageAdded)&&t.data&&t.data.messageAdded&&Object(Z.toast)(t.data.messageAdded.text,{position:Z.toast.POSITION.TOP_LEFT})}},{key:"render",value:function(){return null}}]),r}(y.Component);function ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ut=function(t){d()(r,t);var e,n=(e=r,function(){var t,n=p()(e);if(ot()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function r(){var t;a()(this,r);for(var e=arguments.length,c=new Array(e),o=0;o<e;o++)c[o]=arguments[o];return t=n.call.apply(n,[this].concat(c)),m()(i()(t),"state",{openChats:[]}),m()(i()(t),"openChat",(function(e){var n=t.state.openChats.slice();-1===n.indexOf(e)&&(n.length>2&&(n=n.slice(1)),n.push(e)),t.setState({openChats:n})})),m()(i()(t),"closeChat",(function(e){var n=t.state.openChats.slice(),r=n.indexOf(e);n.splice(r,1),t.setState({openChats:n})})),t}return o()(r,[{key:"render",value:function(){var t=this,e=this.props.user,n=this.state.openChats;return g.a.createElement("div",{className:"wrapper"},g.a.createElement(Z.ToastContainer,null),g.a.createElement(rt,null,g.a.createElement(ct,null)),g.a.createElement(H,null,g.a.createElement(Y,{openChat:this.openChat,user:e})),g.a.createElement("div",{className:"openChats"},n.map((function(n,r){return g.a.createElement(T,{key:"chatWindow"+n,variables:{chatId:n}},g.a.createElement(j,{closeChat:t.closeChat,user:e}))}))))}}]),r}(y.Component)},76:function(t,e,n){"use strict";n.d(e,"a",(function(){return rt}));var r=n(58),a=n.n(r),c=n(5),o=n.n(c),u=n(6),i=n.n(u),s=n(24),l=n.n(s),f=n(10),p=n.n(f),h=n(2),d=n.n(h),v=n(7),m=n.n(v),y=n(8),g=n.n(y),R=n(0),E=n.n(R),b=n(60),C=n.n(b);function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var k=function(t){m()(r,t);var e,n=(e=r,function(){var t,n=d()(e);if(P()){var r=d()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p()(this,t)});function r(){var t;o()(this,r);for(var e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return t=n.call.apply(n,[this].concat(a)),g()(l()(t),"state",{show:!1}),g()(l()(t),"handleClick",(function(){var e=t.state.show;t.setState({show:!e},(function(){e?document.removeEventListener("click",t.handleClick):document.addEventListener("click",t.handleClick)}))})),t}return i()(r,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!0)}},{key:"render",value:function(){var t=this.props,e=t.trigger,n=t.children,r=this.state.show;return E.a.createElement("div",{className:"dropdown"},E.a.createElement("div",null,E.a.createElement("div",{className:"trigger",onClick:this.handleClick},e),r&&E.a.createElement("div",{className:"content"},n)))}}]),r}(R.Component),x=n(61),D=n(3),S=n.n(D),w=n(56),O=n.n(w),I=n(13),A=n(57),M=n.n(A);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function N(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function $(){var t=O()(["\n    mutation deletePost($postId : Int!) {\n        deletePost(postId : $postId) {\n            success\n        }\n    }\n"]);return $=function(){return t},t}function q(){var t=O()(["\n    query postsFeed($page: Int, $limit: Int) { \n        postsFeed(page: $page, limit: $limit) { \n            posts {\n                id\n                text\n                user {\n                    avatar\n                    username\n                }\n            }\n        }\n    }\n"]);return q=function(){return t},t}var L=M()(q()),F=M()($()),_=function(t){m()(r,t);var e,n=(e=r,function(){var t,n=d()(e);if(N()){var r=d()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p()(this,t)});function r(){return o()(this,r),n.apply(this,arguments)}return i()(r,[{key:"render",value:function(){var t=this.props.children,e=this.props.post.id,n={page:0,limit:10};return E.a.createElement(I.Mutation,{update:function(t,r){if(r.data.deletePost.success){var a={query:L};"undefined"!==S()(n)&&(a.variables=n);for(var c=t.readQuery(a),o=0;o<c.postsFeed.posts.length&&c.postsFeed.posts[o].id!==e;o++);c.postsFeed.posts.splice(o,1),t.writeQuery(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},a,{data:c}))}},mutation:F},(function(n){return E.a.Children.map(t,(function(t){return E.a.cloneElement(t,{deletePost:n,postId:e})}))}))}}]),r}(R.Component),Q=n(47),T=function(t){var e=t.deletePost,n=t.postId;return E.a.createElement("button",{onClick:function(){e({variables:{postId:n}})}},"Delete")},U=function(t){var e=t.post,n=t.changeState;return E.a.createElement("div",{className:"header"},E.a.createElement(Q.Link,{to:"/user/"+e.user.username},E.a.createElement("img",{src:e.user.avatar}),E.a.createElement("div",null,E.a.createElement("h2",null,e.user.username))),E.a.createElement(k,{trigger:E.a.createElement(x.FontAwesomeIcon,{icon:"angle-down"})},E.a.createElement("button",{onClick:n},"Edit"),E.a.createElement(_,{post:e},E.a.createElement(T,null))))},W=function(t){var e=t.post;return E.a.createElement("p",{className:"content"},e.text)},V=n(72);function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function B(){var t=O()(["\nmutation updatePost($post : PostInput!, $postId : Int!) {\n    updatePost(post : $post, postId : $postId) {\n        id\n        text\n    }\n}"]);return B=function(){return t},t}function X(){var t=O()(["\n  query postsFeed($page: Int, $limit: Int) { \n    postsFeed(page: $page, limit: $limit) { \n      posts {\n        id\n        text\n        user {\n          avatar\n          username\n        }\n      }\n    }\n  }\n"]);return X=function(){return t},t}var z=M()(X()),G=M()(B()),J=function(t){m()(r,t);var e,n=(e=r,function(){var t,n=d()(e);if(K()){var r=d()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p()(this,t)});function r(){var t;o()(this,r);for(var e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return t=n.call.apply(n,[this].concat(a)),g()(l()(t),"state",{postContent:t.props.post.text}),g()(l()(t),"changePostContent",(function(e){t.setState({postContent:e})})),t}return i()(r,[{key:"render",value:function(){var t=this,e=this.props.children,n=this.state.postContent,r=this.props.post.id,a={page:0,limit:10};return E.a.createElement(I.Mutation,{update:function(t,e){var n=e.data.updatePost,c={query:z};"undefined"!==S()(a)&&(c.variables=a);for(var o=t.readQuery(c),u=0;u<o.postsFeed.posts.length;u++)if(o.postsFeed.posts[u].id===r){o.postsFeed.posts[u].text=n.text;break}t.writeQuery(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},c,{data:o}))},optimisticResponse:{__typename:"Mutation",updatePost:{__typename:"Post",text:n}},mutation:G},(function(a){return E.a.Children.map(e,(function(e){return E.a.cloneElement(e,{updatePost:a,postContent:n,postId:r,changePostContent:t.changePostContent})}))}))}}]),r}(R.Component),Y=n(62),Z=n.n(Y);function tt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var et=function(t){m()(r,t);var e,n=(e=r,function(){var t,n=d()(e);if(tt()){var r=d()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p()(this,t)});function r(){var t;o()(this,r);for(var e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return t=n.call.apply(n,[this].concat(a)),g()(l()(t),"state",{editing:!1}),g()(l()(t),"changeState",(function(){var e=t.state.editing;t.setState({editing:!e})})),t}return i()(r,[{key:"render",value:function(){var t=this.props.post,e=this.state.editing;return E.a.createElement("div",{className:"post "+(t.id<0?"optimistic":"")},E.a.createElement(U,{post:t,changeState:this.changeState}),!e&&E.a.createElement(W,{post:t}),e&&E.a.createElement(J,{post:t},E.a.createElement(V.a,{changeState:this.changeState})))}}]),r}(R.Component);function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}g()(et,"propTypes",{post:Z.a.shape({id:Z.a.number.isRequired,text:Z.a.string.isRequired,user:Z.a.shape({avatar:Z.a.string.isRequired,username:Z.a.string.isRequired}).isRequired}).isRequired});var rt=function(t){m()(r,t);var e,n=(e=r,function(){var t,n=d()(e);if(nt()){var r=d()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p()(this,t)});function r(){var t;o()(this,r);for(var e=arguments.length,c=new Array(e),u=0;u<e;u++)c[u]=arguments[u];return t=n.call.apply(n,[this].concat(c)),g()(l()(t),"state",{page:0,hasMore:!0}),g()(l()(t),"loadMore",(function(e){var n=l()(t),r=t.state.page;e({variables:{page:r+1},updateQuery:function(t,e){var c=e.fetchMoreResult;return c.postsFeed.posts.length?(n.setState({page:r+1}),{postsFeed:{__typename:"PostFeed",posts:[].concat(a()(t.postsFeed.posts),a()(c.postsFeed.posts))}}):(n.setState({hasMore:!1}),t)}})})),t}return i()(r,[{key:"render",value:function(){var t=this,e=this.props,n=e.posts,r=e.fetchMore,a=this.state.hasMore;return E.a.createElement("div",{className:"feed"},E.a.createElement(C.a,{loadMore:function(){return t.loadMore(r)},hasMore:a,loader:E.a.createElement("div",{className:"loader",key:"loader"},"Loading ...")},n.map((function(t,e){return E.a.createElement(et,{key:t.id,post:t})}))))}}]),r}(R.Component)}};